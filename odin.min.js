!function(a,b,c){function d(g){var h,i=f[g];return i||(h=a[b[g]],f[g]=i={id:g,filename:g,dirname:e(g),exports:{},require:d},h(d,i.exports,i,c)),i.exports}function e(a){return a=a.substring(0,a.lastIndexOf("/")+1),a?a.substr(0,a.length-1):"."}var f={};d.resolve=function(a){return a},"function"==typeof define&&define.amd?define([],function(){return d("./index")}):"undefined"!=typeof module&&module.exports?module.exports=d("./index"):c.odin=d("./index")}([function(a,b,c){var d=c.exports;d.Class=a("./base/class"),d.helpers=a("./base/helpers"),d.BaseApplication=a("./application/base_application"),d.Application=a("./application/application"),d.Scene=a("./scene_graph/scene"),d.SceneObject=a("./scene_graph/scene_object"),d.Component=a("./scene_graph/components/component"),d.ComponentManager=a("./scene_graph/component_managers/component_manager"),d.Transform=a("./scene_graph/components/transform"),d.Camera=a("./scene_graph/components/camera")},function(a,b,c){function d(){g.call(this,-1),this.destruct()}var e=a("type"),f=a("utils"),g=a("event_emitter"),h=1;c.exports=d,g.extend(d),d.extend=function(a,b){return d.__classes[b]=a,f.inherits(a,this),a.extend=this.extend,a.create=this.create,a.className=a.prototype.className=b,e.isFunction(this.onExtend)&&this.onExtend.apply(this,arguments),a},d.__classes={},d.createFromJSON=function(a){return d.__classes[a.className].create().fromJSON(a)},d.className=d.prototype.className="Class",d.create=function(){var a=new this;return a.construct.apply(a,arguments)},d.prototype.construct=function(){return this.__id=h++,this},d.prototype.destruct=function(){return this.__id=null,this},d.prototype.toJSON=function(a){return a=a||{},a.className=this.className,a},d.prototype.fromJSON=function(a){return this.className=a.className,this}},function(a,b,c,d){var e,f=c.exports,g=Object.prototype.toString,h=Function.prototype.toString,i=/^\[object .+?Constructor\]$/,j=RegExp("^"+h.call(g).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");f.isObject=function(a){var b;return null!=a&&("object"==(b=typeof a)||"function"===b)},f.isHash=function(a){return"[object Object]"===g.call(a)},f.isArrayLike=function(a){return null!=a&&!f.isWindow(a)&&a.length===+a.length},f.isArray=Array.isArray||function(a){return"[object Array]"===g.call(a)},f.isArguments=function(a){return"[object Arguments]"===g.call(a)},f.isFunction="function"!=typeof/./?function(a){return"function"==typeof a}:function(a){return"[object Function]"===g.call(a)},f.isString=function(a){return"string"==typeof a},f.isNumber=function(a){return"number"==typeof a},f.isFinite=Number.isFinite||function(a){return!("number"!=typeof a||a!==a||1/0===a||a===-1/0)},f.isNaN=Number.isNaN||function(a){return f.isNumber(a)&&a!==a},f.isDecimal=function(a){return f.isNumber(a)&&a%1!==0},f.isFloat=f.isDecimal,f.isInteger=function(a){return f.isNumber(a)&&a%1===0},f.isInt=f.isInteger,f.isDate=function(a){return"[object Date]"===g.call(a)},f.isRegExp=function(a){return"[object RegExp]"===g.call(a)},f.isBoolean=function(a){return a===!0||a===!1},f.isNull=function(a){return null===a},f.isUndefined=function(a){return void 0===a},f.isUndefinedOrNull=function(a){return null==a},f.isDefined=function(a){return null!=a},f.isPrimitive=function(a){var b;return null==a||"object"!=(b=typeof a)&&"function"!==b},f.isError=function(a){return"[object Error]"===g.call(a)},e=function(){try{String({toString:0}+"")}catch(a){return function(){return!1}}return function(a){return!f.isFunction(a.toString)&&"string"==typeof(a+"")}}(),f.isNative=function(a){return null!=a&&(f.isFunction(a)?j.test(h.call(a)):"object"==typeof a&&((e(a)?j:i).test(a)||!1))},f.isNode=function(a){return null!=a&&(f.isFunction(Node)?a instanceof Node:"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName)},f.isTextNode=function(a){return f.isNode(a)&&3===a.nodeType},f.isTextInputElement=function(){var a={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};return function(b){return null!=b&&("INPUT"===b.nodeName&&a[b.type]||"TEXTAREA"===b.nodeName)}}(),f.isElement=function(a){return null!=a&&(f.isFunction(HTMLElement)?a instanceof HTMLElement:"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName)},f.isEventTarget=function(a){return null!=a&&(f.isFunction(EventTarget)?a instanceof EventTarget:f.isFunction(a.addEventListener)||f.isFunction(a.attachEvent))},f.isDocument=function(a){return f.isNode(a)&&9===a.nodeType},f.isWindow=function(a){return null!=a&&a.window===a},f.isGlobal=function(a){return a===d}},function(a,b,c,d){function e(a){var b,c=H;for(b in a)if(c.call(a,b))return!1;return!0}function f(a){for(var b=a.length,c=new Array(b),d=0;b--;)c[d++]=a[b];return c}function g(a){for(var b,c=B.keys(a),d=-1,e=c.length-1,f={};d++<e;)b=c[d],f[a[b]]=b;return f}function h(a){for(var b,c=-1,d=a.length-1,e={};c++<d;)b=a[c]+"",e[b]=b;return e}function i(a){for(var b,c=B.keys(a),d=-1,e=c.length-1,f={};d++<e;)b=c[d],f[b]=b;return f}function j(a,b){for(var c,d=B.keys(b),e=d.length;e--;)c=d[e],a[c]=b[c];return a}function k(a,b){for(var c,d,e=B.keys(b),f=e.length;f--;)c=e[f],null!=(d=b[c])&&(a[c]=d);return a}function l(a,b){for(var c,d,e=B.keys(b),f=e.length;f--;)c=e[f],null==a[c]&&null!=(d=b[c])&&(a[c]=d);return a}function m(a,b,c){var d,e,f,g,h,i,j=H;if(!A.isObject(a)||A.isFunction(a))return a;if(-1!==(d=B.indexOf(b,a)))return c[d];if(b[b.length]=a,A.isArray(a)){for(h=a.length,f=-1,g=h-1,e=new Array(h),c[c.length]=e;f++<g;)e[f]=m(a[f],b,c);return e}e=A.isDate(a)?new Date(a):{},c[c.length]=e;for(i in a)j.call(a,i)&&(e[i]=m(a[i],b,c));return e}function n(a){for(var b,c=B.indexOf,d=-1,e=a.length-1,f=[],g=[];d++<e;)b=a[d],-1===c(g,b)&&(f[f.length]=b,g[g.length]=b);return f}function o(a,b,c){var d,e=A.isArray,f=-1,g=a.length-1;for(b=null!=b?b:-1,c=c||[];f++<g;)d=a[f],(-1===b||b>0)&&e(d)?o(d,b-1,c):c[c.length]=d;return c}function p(a,b){for(var c,d,e,f=-1,g=a.length-1,h=b.length,i=[];f++<g;){for(d=a[f],e=!0,c=h;c--;)if(d===b[c]){e=!1;break}e&&(i[i.length]=d)}return i}function q(){this.thisArg=null,this.args=null,this.argsRight=null}function r(a,b){var c,d,e,f,g;for(b=b||0,c=a.length,d=b-1,e=c-1,f=new Array(c-b),g=0;d++<e;)f[g++]=a[d];return f}function s(a,b){for(var c=a.length,d=b.length,e=c,f=new Array(c+d);e--;)f[e]=a[e];for(e=d;e--;)f[c+e]=b[e];return f}function t(a,b){var c=a.length,d=b.length,e=d;for(a.length+=d;e--;)a[c+e]=b[e];return a}function u(a,b,c,d){return null!=d?0===c?a.call(d):1===c?a.call(d,b[0]):2===c?a.call(d,b[0],b[1]):3===c?a.call(d,b[0],b[1],b[2]):4===c?a.call(d,b[0],b[1],b[2],b[3]):5===c?a.call(d,b[0],b[1],b[2],b[3],b[4]):a.apply(d,b):0===c?a():1===c?a(b[0]):2===c?a(b[0],b[1]):3===c?a(b[0],b[1],b[2]):4===c?a(b[0],b[1],b[2],b[3]):5===c?a(b[0],b[1],b[2],b[3],b[4]):a.apply(null,b)}function v(a){var b;return H.call(a,"__wrapper__")?b=a:(b=function c(){var b=c.__wrapper__,d=b.args,e=b.argsRight,f=r(arguments);return d&&(f=s(d,f)),e&&(f=t(f,e)),u(a,f,f.length,b.thisArg)},I.value=new q,F(b,"__wrapper__",I),I.value=null),b}function w(a,b){var c=0,d=b?b.length:0;return(A.isString(a)?a+"":"").replace(K,function(a,e){var f,g;return"%%"===a?"%":c>=d?"":(g=w[e],f=b[c++],null!=f&&A.isFunction(g)?g(f):"")})}function x(a,b,c,e){var f,g,h,i,j;if(-1!==B.indexOf(b,a))return G.call(a);if(b[b.length]=a,A.isFunction(a)||c>=e)return G.call(a);if(A.isArrayLike(a)&&a!==d){for(c++,f=[],g=-1,h=a.length-1;g++<h;)f[g]=z(a[g],b,c,e);return f}if(A.isObject(a)){for(c++,f={},i=B.keys(a),g=-1,h=i.length-1;g++<h;)j=i[g],f[j]=z(a[j],b,c,e);return f}return A.isFunction(a.toString)?a.toString():a+""}function y(a){return A.isNumber(a)?Number(a):String(a)}function z(a,b,c,d){return A.isPrimitive(a)?y(a):x(a,b,c,d)}var A=a("type"),B=c.exports,C=Object.keys,D=Object.freeze,E=Object.getPrototypeOf,F=Object.defineProperty,G=Object.prototype.toString,H=Object.prototype.hasOwnProperty,I={configurable:!1,enumerable:!1,writable:!1,value:null},J=/^[\s\xA0]+|[\s\xA0]+$/g,K=/%([a-z%])/g;B.noop=function(){return void 0},B.identity=function(a){return a},B.identityFn=function(a){return function(){return a}},B.isEmpty=function(a){return null==a?!0:A.isString(a)||A.isArray(a)?0===a.length:e(a)},B.trim=function(a){return A.isString(a)?a.replace(J,""):""},A.isNative(C)||(C=function(a){var b,c=H,d=[],e=0;for(b in a)c.call(a,b)&&(d[e++]=b);return d}),B.keys=function(a){return C(A.isObject(a)?a:Object(a))},A.isNative(D)||(D=B.identity),B.freeze=function(a){return D(A.isObject(a)?a:Object(a))},A.isNative(E)||(E=function(a){return a.__proto__||(a.constructor?a.constructor.prototype:null)}),B.getPrototypeOf=function(a){return null==a?null:E(A.isObject(a)?a:Object(a))},A.isNative(F)||(F=function(a,b,c){if(!A.isObject(c))throw new TypeError("Property description must be an object: "+c);A.isFunction(c.get)?a[b]=c.get:H.call(c,"value")&&(a[b]=c.value)}),B.values=function(a){for(var b=B.keys(a),c=b.length,d=-1,e=c-1,f=new Array(c);d++<e;)f[d]=a[b[d]];return f},B.reverse=function(a){return A.isArray(a)?f(a):g(A.isObject(a)?a:Object(a))},B.keyMirror=function(a){return A.isArray(a)?h(a):i(a)},B.has=function(a,b){return H.call(a,b)},B.extend=function(a){for(var b=0,c=arguments.length-1;b++<c;)j(a,arguments[b]);return a},B.deepExtend=function(a){for(var b=0,c=arguments.length-1,d=[],e=[];b++<c;)j(a,m(arguments[b],d,e)),d.length=0,e.length=0;return a},B.merge=function(a){for(var b=0,c=arguments.length-1;b++<c;)k(a,arguments[b]);return a},B.deepMerge=function(a){for(var b=0,c=arguments.length-1,d=[],e=[];b++<c;)k(a,m(arguments[b],d,e)),d.length=0,e.length=0;return a},B.mixin=function(a){for(var b=0,c=arguments.length-1;b++<c;)l(a,arguments[b]);return a},B.deepMixin=function(a){for(var b=0,c=arguments.length-1,d=[],e=[];b++<c;)l(a,m(arguments[b],d,e)),d.length=0,e.length=0;return a},B.copy=function(a){return A.isObject(a)?A.isArray(a)?r(a):j({},a):a},B.deepCopy=function(a){return m(a,[],[])},B.indexOf=function(a,b,c){for(var d=(c||0)-1,e=a.length-1;d++<e;)if(b===a[d])return d;return-1},B.remove=function(a,b,c){var d=B.indexOf(a,b,c);return-1!==d?(a.splice(d,1),d):-1},B.unique=function(){return n(o(r(arguments),1))},B.difference=function(a){return p(a,o(r(arguments,1)))},B.create=Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),B.bind=function(a,b){var c=v(a),d=c.__wrapper__;return d.thisArg=b,arguments.length>2&&(d.args=d.args?t(d.args,r(arguments,2)):r(arguments,2)),c},B.bindThis=function(a,b){var c=v(a);return c.__wrapper__.thisArg=b,c},B.curry=function(a){var b=v(a),c=b.__wrapper__;return arguments.length>1&&(c.args=c.args?t(c.args,r(arguments,1)):r(arguments,1)),b},B.curryRight=function(a){var b=v(a),c=b.__wrapper__;return arguments.length>1&&(c.argsRight=c.argsRight?t(c.argsRight,r(arguments,1)):r(arguments,1)),b},B.inherits=function(a,b){return a.prototype=B.extend(B.create(b.prototype),a.prototype),a.prototype.constructor=a,a._super=b.prototype,a},B.assert=function(a){var b;if(!a)throw b=new Error("Assert Violation: "+w.apply(null,r(arguments,1))),b.framesToPop=1,b},w.s=function(a){return String(a)},w.d=function(a){return Number(a)},w.j=function(a){try{return JSON.stringify(a)}catch(b){return"[Circular]"}},w.o=function(a){try{return JSON.stringify(z(a,[],0,5),null,2)}catch(b){return"[Circular]"}},B.format=function(a){return w(a,r(arguments,1))},B.formatArgs=w},function(a,b,c){function d(a){this.__events={},this.__maxListeners=null!=a?a:d.defaultMaxListeners}function e(a,b){var c,d,e,f,g;for(b=b||0,c=a.length,d=b-1,e=c-1,f=new Array(c-b),g=0;d++<e;)f[g++]=a[d];return f}function f(a,b){var c,d,e,f,g,h=b.length,i=a.length-1,j=-1;if(0===h)for(;j++<i;)(g=a[j])&&g();else if(1===h)for(c=b[0];j++<i;)(g=a[j])&&g(c);else if(2===h)for(c=b[0],d=b[1];j++<i;)(g=a[j])&&g(c,d);else if(3===h)for(c=b[0],d=b[1],e=b[2];j++<i;)(g=a[j])&&g(c,d,e);else if(4===h)for(c=b[0],d=b[1],e=b[2],f=b[3];j++<i;)(g=a[j])&&g(c,d,e,f);else for(;j++<i;)(g=a[j])&&g.apply(null,b)}function g(a,b,c){function d(d){return h!==!0?f===e||d?(h=!0,void c(d)):void a[f++].apply(null,b):void 0}var e=a.length,f=0,g=b.length,h=!1;b[g]=d,d()}var h=a("type"),i=a("utils");d.prototype.on=function(a,b){var c,d,e;if(!h.isFunction(b))throw new TypeError("EventEmitter.on(name, listener) listener must be a function");return c=this.__events||(this.__events={}),d=c[a]||(c[a]=[]),e=this.__maxListeners||-1,d.push(b),-1!==e&&d.length>e&&console.error("EventEmitter.on(type, listener) possible EventEmitter memory leak detected. "+e+" listeners added"),this},d.prototype.addListener=d.prototype.on,d.prototype.once=function(a,b){function c(){var e=arguments.length;return d.off(a,c),0===e?b():1===e?b(arguments[0]):2===e?b(arguments[0],arguments[1]):3===e?b(arguments[0],arguments[1],arguments[2]):4===e?b(arguments[0],arguments[1],arguments[2],arguments[3]):5===e?b(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]):b.apply(null,arguments)}var d=this;return this.on(a,c),c},d.prototype.listenTo=function(a,b){function c(){d.emitArgs(b,arguments)}var d=this;if(!h.isFunction(a.on)&&!h.isFunction(a.addListener))throw new TypeError("EventEmitter.listenTo(obj, name) obj must have a on function taking (name, listener[, ctx])");return a.on(b,c),c},d.prototype.off=function(a,b){var c,d,e,f=this.__events||(this.__events={});if(c=f[a],!c)return this;if(b){for(e=c.length;e--;)d=c[e],d===b&&(this.emit("removeListener",a,d),c.splice(e,1));0===c.length&&delete f[a]}else{for(e=c.length;e--;)this.emit("removeListener",a,c[e]);c.length=0,delete f[a]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(){for(var a,b,c,d=this.__events||(this.__events={}),e=i.keys(d),f=-1,g=e.length-1;f++<g;){if(a=e[f],b=d[a])for(c=b.length;c--;)this.emit("removeListener",a,b[c]),b.splice(c,1);delete d[a]}return this},d.prototype.emit=function(a){var b=(this.__events||(this.__events={}))[a];return b&&b.length?(f(b,e(arguments,1)),this):this},d.prototype.emitArgs=function(a,b){var c=(this.__events||(this.__events={}))[a];return c&&c.length?(f(c,b),this):this},d.prototype.emitAsync=function(a,b,c){var d=(this.__events||(this.__events={}))[a];if(b=e(arguments,1),c=b.pop(),!h.isFunction(c))throw new TypeError("EventEmitter.emitAsync(name [, ...args], callback) callback must be a function");return d&&d.length?g(d,b,c):c(),this},d.prototype.listeners=function(a){var b=(this.__events||(this.__events={}))[a];return b?e(b):[]},d.prototype.listenerCount=function(a){var b=(this.__events||(this.__events={}))[a];return b?b.length:0},d.prototype.setMaxListeners=function(a){if((a=+a)!==a)throw new TypeError("EventEmitter.setMaxListeners(value) value must be a number");return this.__maxListeners=0>a?-1:a,this},d.defaultMaxListeners=10,d.listeners=function(a,b){var c;if(null==a)throw new TypeError("EventEmitter.listeners(obj, name) obj required");return c=a.__events&&a.__events[b],c?e(c):[]},d.listenerCount=function(a,b){var c;if(null==a)throw new TypeError("EventEmitter.listenerCount(obj, name) obj required");return c=a.__events&&a.__events[b],c?c.length:0},d.setMaxListeners=function(a){if((a=+a)!==a)throw new TypeError("EventEmitter.setMaxListeners(value) value must be a number");return d.defaultMaxListeners=0>a?-1:a,a},d.extend=function(a){return i.inherits(a,this),a.extend=this.extend,a},c.exports=d},function(a,b,c){function d(a){return a[0].toUpperCase()+a.slice(1).toLowerCase()}var e=a("time"),f=c.exports,g=/[^A-Z-_ \.]+|[A-Z][^A-Z-_ \.]+|[^a-z-_ \.]+/g;f.camelize=function(a,b){for(var c=a.match(g),e=c.length;e--;)c[e]=d(c[e]);return a=c.join(""),b!==!1?a[0].toLowerCase()+a.slice(1):a},f.timer=function(){var a=e.now();return{delta:function(){return e.now()-a},reset:function(){a=e.now()}}}},function(a,b,c){var d,e,f,g,h,i=a("process"),j=a("environment"),k=c.exports;d=Date.now||function(){return(new Date).getTime()},j.node?(f=i.hrtime(),h=function(){var a=i.hrtime(f),b=1e3*a[0],c=1e-6*a[1];return b+c}):(e=j.window.performance||{},e.now=e.now||e.webkitNow||e.mozNow||e.msNow||e.oNow||function(){return d()-g},h=function(){return e.now()}),g=d(),k.now=h,k.stamp=function(){return g+h()}},function(a,b,c){function d(){}var e=c.exports={};e.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.MutationObserver,c="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};var d=[];if(b){var e=document.createElement("div"),f=new MutationObserver(function(){var a=d.slice();d.length=0,a.forEach(function(a){a()})});return f.observe(e,{attributes:!0}),function(a){d.length||e.setAttribute("yes","no"),d.push(a)}}return c?(window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),d.length>0)){var c=d.shift();c()}},!0),function(a){d.push(a),window.postMessage("process-tick","*")}):function(a){setTimeout(a,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")}},function(a,b,c,d){var e=c.exports;e.browser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),e.node=!e.browser,e.window="undefined"!=typeof window?window:"undefined"!=typeof d?d:"undefined"!=typeof self?self:{},e.document="undefined"!=typeof document?document:{},e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.canUseWorkers="undefined"!=typeof Worker,e.canUseEventListeners=e.canUseDOM&&!(!window.addEventListener&&!window.attachEvent),e.canUseViewport=e.canUseDOM&&!!window.screen,e.isInWorker="undefined"!=typeof importScripts},function(a,b,c){function d(){h.call(this)}function e(a,b){var c,d=a.__scenes,e=a.__sceneHash,f=b.name;if(e[f])throw new Error("Application addScene(...scenes) Scene is already a member of Application");c=b instanceof i?b.toJSON():b,e[f]=c,d[d.length]=c,a.emit("addScene",f)}function f(a,b){var c,d,e=a.__scenes,f=a.__sceneHash;if(g.isString(b)?c=f[b]:g.isNumber(b)&&(c=e[b]),d=c.name,!f[d])throw new Error("Application removeScene(...scenes) Scene not a member of Application");f[d]=null,utils.remove(e,c),a.emit("removeScene",d)}var g=a("type"),h=a("./base/class"),i=a("./scene_graph/scene"),j=a("./application/create_loop"),k=h.prototype;c.exports=d,h.extend(d,"BaseApplication"),d.prototype.construct=function(){var a=this;return k.construct.call(this),this.__scenes=[],this.__sceneHash={},this.__loop=j(function(b){a.loop(b)},this.canvas?this.canvas.element:void 0),this},d.prototype.destruct=function(){return k.destruct.call(this),this.__scenes=null,this.__sceneHash=null,this.__loop=null,this},d.prototype.addScene=function(){for(var a=-1,b=arguments.length-1;a++<b;)e(this,arguments[a]);return this},d.prototype.removeScene=function(){for(var a=-1,b=arguments.length-1;a++<b;)f(this,arguments[a]);return this},d.prototype.init=function(){return this.__loop.run(),this.emit("init"),this},d.prototype.pause=function(){return this.__loop.pause(),this.emit("pause"),this},d.prototype.resume=function(){return this.__loop.run(),this.emit("resume"),this},d.prototype.isRunning=function(){return this.__loop.isRunning()},d.prototype.isPaused=function(){return this.__loop.isPaused()},d.prototype.loop=function(){}},function(a,b,c){function d(){o.call(this)}function e(a,b){var c=a.__sceneObjects,d=a.__sceneObjectHash,e=b.__id;if(d[e])throw new Error("Scene add(...sceneObjects) trying to add object that is already a member of Scene");b.scene=a,c[c.length]=b,d[e]=b,f(a,b.__components),g(a,b.children),a.emit("addChild",b)}function f(a,b){for(var c=-1,d=b.length-1;c++<d;)a.__addComponent(b[c])}function g(a,b){for(var c=-1,d=b.length-1;c++<d;)e(a,b[c])}function h(a,b){var c=a.__sceneObjectHash,d=b.__id;if(!c[d])throw new Error("Scene remove(...sceneObjects) trying to remove object that is not a member of Scene");b.scene=null,n.remove(a.__sceneObjects,b),delete c[d],i(a,b.__components),j(a,b.children),a.emit("removeChild",b)}function i(a,b){for(var c=-1,d=b.length-1;c++<d;)a.__removeComponent(b[c])}function j(a,b){for(var c=-1,d=b.length-1;c++<d;)h(a,b[c])}function k(a){a.__managers.sort(l)}function l(a,b){return a.order-b.order}var m=a("input"),n=a("utils"),o=a("./base/class"),p=a("./base/time"),q=o.prototype;c.exports=d,o.extend(d,"Scene"),d.prototype.construct=function(a){return q.construct.call(this),this.name=a,this.time=p.create(),this.input=m.create(),this.__sceneObjects=[],this.__sceneObjectHash={},this.__managers=[],this.__managerHash={},this},d.prototype.destruct=function(){return q.destruct.call(this),this.name=null,this.time=null,this.input=null,this.application=null,this.__sceneObjects=null,this.__sceneObjectHash=null,this.__managers=null,this.__managerHash=null,this},d.prototype.init=function(){var a=this.__managers,b=-1,c=a.length-1;for(this.input.attach(this.application.canvas.element);b++<c;)a[b].init();return this},d.prototype.update=function(){var a=this.time,b=this.__managers,c=-1,d=b.length-1;for(a.update(),this.input.update(a.time,a.frameCount);c++<d;)b[c].update();return this.emit("update"),this},d.prototype.destroy=function(){for(var a=this.__sceneObjects,b=-1,c=a.length-1,d=this.game;b++<c;)a.destroy();return d&&d.remove(this),this},d.prototype.has=function(a){return-1!==n.indexOf(this.__sceneObjects,a)},d.prototype.find=function(a){for(var b,c=this.__sceneObjects,d=-1,e=c.length-1;d++<e;)if(b=c[d],b.name===a)return b;return void 0},d.prototype.add=function(){for(var a=-1,b=arguments.length-1;a++<b;)e(this,arguments[a]);return this},d.prototype.__addComponent=function(a){var b=a.memberName,c=this.__managerHash,d=this.__managers,e=c[b];return e||(e=a.manager.create(),d[d.length]=e,c[b]=e,k(this)),e.add(a),e.__sort(),a.awake(),this},d.prototype.remove=function(){for(var a=-1,b=arguments.length-1;a++<b;)h(this,arguments[a]);return this},d.prototype.__removeComponent=function(a){var b=a.memberName,c=this.__managerHash,d=this.__managers,e=c[b];return e?(e.remove(a),e.__sort(),e.isEmpty()&&(n.remove(d,e),delete c[b],k(this)),this):this},d.prototype.toJSON=function(a){var b,c,d=this.__sceneObjects,e=-1,f=d.length-1;for(a=q.toJSON.call(this,a),b=a.sceneObjects||(a.sceneObjects=[]);e++<f;)c=d[e],0===c.depth&&(b[b.length]=c.toJSON(b[b.length]));return a.name=this.name,a},d.prototype.fromJSON=function(a){var b=a.sceneObjects,c=-1,d=b.length-1;for(q.fromJSON.call(this,a);c++<d;)this.add(o.createFromJSON(b[c]));return this.name=a.name,this}},function(a,b,c){function d(){f.call(this,-1),this.destruct()}var e=a("vec3"),f=a("event_emitter"),g=a("input/handler"),h=a("input/mouse"),i=a("input/buttons"),j=a("input/axes"),k=a("input/event_handlers"),l=["mouse0","mouse1","mouse2"];c.exports=d,f.extend(d),d.create=function(){return(new d).construct()},d.prototype.construct=function(){return this.__stack=[],this.__frame=-1,this.mouse=h.create(),this.buttons=i.create(),this.axes=j.create(),this.acceleration=e.create(),this.touches=[],this},d.prototype.destruct=function(){return this.__lastTime=null,this.__frame=null,this.__stack=null,this.__handler=null,this.mouse=null,this.buttons=null,this.axes=null,this.acceleration=null,this.touches=null,this},d.prototype.attach=function(a,b){var c=this.__handler;return b=null!=b?!!b:!1,c?c.detach(a):c=this.__handler=g.create(this),c.attach(a,b),this},d.prototype.axis=function(a){var b=this.axes.__hash[a];return b?b.value:0},d.prototype.mouseButton=function(a){var b=this.buttons.__hash[l[a]];return b&&b.value},d.prototype.mouseButtonDown=function(a){var b=this.buttons.__hash[l[a]];return!!b&&b.value&&b.frameDown>=this.__frame},d.prototype.mouseButtonUp=function(a){var b=this.buttons.__hash[l[a]];return null!=b?b.frameUp>=this.__frame:!0},d.prototype.key=function(a){var b=this.buttons.__hash[a];return!!b&&b.value},d.prototype.keyDown=function(a){var b=this.buttons.__hash[a];return!!b&&b.value&&b.frameDown>=this.__frame},d.prototype.keyUp=function(a){var b=this.buttons.__hash[a];return null!=b?b.frameUp>=this.__frame:!0},d.prototype.update=function(a,b){var c,d,e,f=this.__stack,g=-1,h=f.length-1;for(this.__frame=b,this.mouse.wheel=0;g++<h;)c=f[g],c.isPersistent=!1,d=c.constructor.destroy,k[c.type](this,c,a,b),d&&c.isPersistent!==!1&&d(c);return f.length=0,e=this.__lastTime||(this.__lastTime=a),this.__lastTime=a,this.axes.update(this,a-e),this.emit("update"),this.__handler&&this.__handler.reset(),this}},function(a,b,c){var d=a("mathf"),e=c.exports;e.create=function(a,b,c){var e=new d.ArrayType(3);return e[0]=void 0!==a?a:0,e[1]=void 0!==b?b:0,e[2]=void 0!==c?c:0,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.clone=function(a){var b=new d.ArrayType(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.set=function(a,b,c,d){return a[0]=void 0!==b?b:0,a[1]=void 0!==c?c:0,a[2]=void 0!==d?d:0,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],b},e.sub=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.mul=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.div=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*(0!==d?1/d:d),a[1]=b[1]*(0!==e?1/e:e),a[2]=b[2]*(0!==f?1/f:f),a},e.sadd=function(a,b,c){return a[0]=b[0]+c,a[1]=b[1]+c,a[2]=b[2]+c,b},e.ssub=function(a,b,c){return a[0]=b[0]-c,a[1]=b[1]-c,a[2]=b[2]-c,a},e.smul=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.sdiv=function(a,b,c){return c=0!==c?1/c:c,a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.lengthSqValues=function(a,b,c){return a*a+b*b+c*c},e.lengthValues=function(a,b,c){var f=e.lengthSqValues(a,b,c);return 0!==f?d.sqrt(f):f},e.invLengthValues=function(a,b,c){var f=e.lengthSqValues(a,b,c);return 0!==f?1/d.sqrt(f):f},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.lengthSq=function(a){return e.dot(a,a)},e.length=function(a){var b=e.lengthSq(a);return 0!==b?d.sqrt(b):b},e.invLength=function(a){var b=e.lengthSq(a);return 0!==b?1/d.sqrt(b):b},e.setLength=function(a,b,c){var d=b[0],f=b[1],g=b[2],h=c*e.invLengthValues(d,f,g);return a[0]=d*h,a[1]=f*h,a[2]=g*h,a},e.normalize=function(a,b){var c=b[0],d=b[1],f=b[2],g=e.invLengthValues(c,d,f);return a[0]=c*g,a[1]=d*g,a[2]=f*g,a},e.inverse=function(a,b){return a[0]=-1*b[0],a[1]=-1*b[1],a[2]=-1*b[2],a},e.lerp=function(a,b,c,e){var f=d.lerp;return a[0]=f(b[0],c[0],e),a[1]=f(b[1],c[1],e),a[2]=f(b[2],c[2],e),a},e.min=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=d>g?g:d,a[1]=e>h?h:e,a[2]=f>i?i:f,a},e.max=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=g>d?g:d,a[1]=h>e?h:e,a[2]=i>f?i:f,a},e.clamp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=c[0],i=c[1],j=c[2],k=d[0],l=d[1],m=d[2];return a[0]=h>e?h:e>k?k:e,a[1]=i>f?i:f>l?l:f,a[2]=j>g?j:g>m?m:g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[4]+f*c[8]+c[12],a[1]=d*c[1]+e*c[5]+f*c[9]+c[13],a[2]=d*c[2]+e*c[6]+f*c[10]+c[14],a},e.transformMat4Rotation=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[4]+f*c[8],a[1]=d*c[1]+e*c[5]+f*c[9],a[2]=d*c[2]+e*c[6]+f*c[10],a},e.transformProjection=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=d*c[3]+e*c[7]+f*c[11]+c[15];return g=0!==g?1/g:g,a[0]=(d*c[0]+e*c[4]+f*c[8]+c[12])*g,a[1]=(d*c[1]+e*c[5]+f*c[9]+c[13])*g,a[2]=(d*c[2]+e*c[6]+f*c[10]+c[14])*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.positionFromMat4=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a},e.scaleFromMat3=function(a,b){return a[0]=e.lengthValues(b[0],b[3],b[6]),a[1]=e.lengthValues(b[1],b[4],b[7]),a[2]=e.lengthValues(b[2],b[5],b[8]),a},e.scaleFromMat4=function(a,b){return a[0]=e.lengthValues(b[0],b[4],b[8]),a[1]=e.lengthValues(b[1],b[5],b[9]),a[2]=e.lengthValues(b[2],b[6],b[10]),a},e.equal=function(a,b){return!(a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2])},e.notEqual=function(a,b){return a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]},e.str=function(a){return"Vec3("+a[0]+", "+a[1]+", "+a[2]+")"}},function(a,b,c){var d=a("utils"),e=c.exports;e.ArrayType="undefined"!=typeof Float32Array?Float32Array:Array,e.PI=Math.PI,e.TAU=2*e.PI,e.TWO_PI=e.TAU,e.HALF_PI=.5*e.PI,e.FOURTH_PI=.25*e.PI,e.EPSILON=1e-6,e.TO_RADS=e.PI/180,e.TO_DEGS=180/e.PI,e.E=Math.E,e.LN2=Math.LN2,e.LN10=Math.LN10,e.LOG2E=Math.LOG2E,e.LOG10E=Math.LOG10E,e.SQRT1_2=Math.SQRT1_2,e.SQRT2=Math.SQRT2,e.abs=Math.abs,e.acos=Math.acos,e.acosh=Math.acosh||(Math.acosh=function(a){return Math.log(a+Math.sqrt(a*a-1))}),e.asin=Math.asin,e.asinh=Math.asinh||(Math.asinh=function(a){return a===-1/0?a:Math.log(a+Math.sqrt(a*a+1))}),e.atan=Math.atan,e.atan2=Math.atan2,e.atanh=Math.atanh||(Math.atanh=function(a){return Math.log((1+a)/(1-a))/2}),e.cbrt=Math.cbrt||(Math.cbrt=function(a){var b=e.pow(e.abs(a),1/3);return 0>a?-b:b}),e.ceil=Math.ceil,e.cos=Math.cos,e.cosh=Math.cosh||(Math.cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2}),e.exp=Math.exp,e.floor=Math.floor,e.fround=Math.fround||(Math.fround=function(a){return a}),e.log=Math.log,e.log10=Math.log10||(Math.log10=function(a){return Math.log(a)/Math.LN10}),e.max=Math.max,e.min=Math.min,e.pow=Math.pow,e.random=Math.random,e.round=Math.round,e.sin=Math.sin,e.sinh=Math.sinh||(Math.sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2}),e.sqrt=Math.sqrt,e.tan=Math.tan,e.tanh=Math.tanh||(Math.tanh=function(a){return 1/0===a?1:a===-1/0?-1:(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))}),e.equals=function(a,b,c){return e.abs(a-b)<(void 0!==c?c:e.EPSILON)},e.modulo=function(a,b){var c=a%b;return 0>c*b?c+b:c},e.standardRadian=function(a){return e.modulo(a,e.TWO_PI)},e.standardAngle=function(a){return e.modulo(a,360)},e.sign=function(a){return 0>a?-1:1},e.snap=function(a,b){var c=a%b;return b>c?a-c:a+b-c},e.clamp=function(a,b,c){return b>a?b:a>c?c:a},e.clampBottom=function(a,b){return b>a?b:a},e.clampTop=function(a,b){return a>b?b:a},e.clamp01=function(a){return 0>a?0:a>1?1:a},e.truncate=function(a,b){var c=e.pow(10,b),d=a*c;return(0>d?e.ceil(d):e.floor(d))/c},e.lerp=function(a,b,c){return a+(b-a)*c},e.lerpRadian=function(a,b,c){return e.standardRadian(a+(b-a)*c)},e.lerpAngle=function(a,b,c){return e.standardAngle(a+(b-a)*c)},e.lerpCos=function(a,b,c){var d=c*e.PI,f=.5*(1-e.cos(d));return a*(1-f)+b*f},e.lerpCubic=function(a,b,c,d,e){var f,g,h,i,j,k,l;return a||(a=b),d||(d=c),f=d-c-(a-b),g=a-b-f,h=c-a,i=b,j=f*e,k=g*e,l=h*e,j*j*j+k*k+l+i},e.smoothStep=function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*(3-2*a))},e.smootherStep=function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*a*(a*(6*a-15)+10))},e.pingPong=function(a,b){return b||(b=1),b-e.abs(a%(2*b)-b)},e.degsToRads=function(a){return e.standardRadian(a*e.TO_RADS)},e.radsToDegs=function(a){return e.standardAngle(a*e.TO_DEGS)},e.randInt=function(a,b){return e.round(a+e.random()*(b-a))},e.randFloat=function(a,b){return a+e.random()*(b-a)},e.randSign=function(){return e.random()<.5?1:-1},e.shuffle=function(a){for(var b,c,d=a.length;d;)b=e.random()*d--|0,c=a[d],a[d]=a[b],a[b]=c;return a},e.randArg=function(){return arguments[e.random()*arguments.length|0]},e.randChoice=function(a){return a[e.random()*a.length|0]},e.randChoiceObject=function(a){var b=d.keys(a);return a[b[e.random()*b.length|0]]},e.isPowerOfTwo=function(a){return(a&-a)===a},e.floorPowerOfTwo=function(a){for(var b,c=2;a>c;)b=c,c*=2;return b},e.ceilPowerOfTwo=function(a){for(var b=2;a>b;)b*=2;return b};var f=.39269908169872414,g=1.1780972450961724,h=1.9634954084936207,i=2.748893571891069,j=3.5342917352885173,k=4.319689898685966,l=5.105088062083414,m=5.8904862254808625,n="right",o="up_right",p="up",q="up_left",r="left",s="down_left",t="down",u="down_right";
e.directionAngle=function(a){return a=e.standardRadian(a),a>=m&&f>a?n:a>=f&&g>a?o:a>=g&&h>a?p:a>=h&&i>a?q:a>=i&&j>a?r:a>=j&&k>a?s:a>=k&&l>a?t:a>=l&&m>a?u:n},e.direction=function(a,b){var c=e.standardRadian(e.atan2(b,a));return c>=m&&f>c?n:c>=f&&g>c?o:c>=g&&h>c?p:c>=h&&i>c?q:c>=i&&j>c?r:c>=j&&k>c?s:c>=k&&l>c?t:c>=l&&m>c?u:n}},function(a,b,c){function d(){this.destruct()}var e=a("time"),f=a("environment"),g=a("delegator"),h=f.document;c.exports=d,d.create=function(a){return(new d).construct(a)},d.prototype.construct=function(a){return this.__input=a,this.__handled={mousedown:!1,mouseup:!1,mousemove:!1,mouseout:!1,wheel:!1,keyup:!1,keydown:!1,touchstart:!1,touchmove:!1,touchend:!1,touchcancel:!1,devicemotion:!1},this},d.prototype.destruct=function(){return this.__input=null,this.__element=null,this.__isStatic=null,this.__handler=null,this.__nativeHandler=null,this.__handled=null,this},d.prototype.reset=function(){var a=this.__handled;return a.mousedown=!1,a.mouseup=!1,a.mousemove=!1,a.mouseout=!1,a.wheel=!1,a.keyup=!1,a.keydown=!1,a.touchstart=!1,a.touchmove=!1,a.touchend=!1,a.touchcancel=!1,a.devicemotion=!1,this},d.prototype.attach=function(a,b){var c,d,f,i,j,k,l;return a===this.__element&&b===this.__isStatic?this:(d=this.__input,f=d.__stack,i=this.__handled,j=!1,b?(c=this,l=0,k=function(){j?(j=!1,window.setTimeout(k,0)):d.update(e.stamp(),l++)},this.__handler=function(a){var b=a.type;i[b]||(i[b]=!0,j=!0,a.persist(),a.preventDefault(),f[f.length]=a,window.setTimeout(k,0))},this.__nativeHandler=function(a){var b=a.type;i[b]||(i[b]=!0,j=!0,a.preventDefault(),f[f.length]=a,window.setTimeout(k,0))}):(this.__handler=function(a){var b=a.type;i[b]||(i[b]=!0,a.persist(),a.preventDefault(),f[f.length]=a)},this.__nativeHandler=function(a){var b=a.type;i[b]||(i[b]=!0,a.preventDefault(),f[f.length]=a)}),g.on(a,"mousedown mouseup mousemove mouseout wheel",this.__handler),g.on(h,"keyup keydown",this.__handler),g.on(a,"touchstart touchmove touchend touchcancel",this.__handler),g.on(window,"devicemotion",this.__nativeHandler),this.__element=a,this.__isStatic=b,this)},d.prototype.detach=function(a){var b=this.__element;return a===b?this:(b&&(g.off(b,"mousedown mouseup mousemove mouseout wheel",this.__handler),g.off(h,"keydown keyup",this.__handler),g.off(b,"touchstart touchmove touchend touchcancel",this.__handler),g.off(window,"devicemotion",this.__nativeHandler)),this.__element=null,this.__handler=null,this.__nativeHandler=null,this)}},function(a,b,c){function d(a,b,c){var d,e=s[b],g=void 0===e;g&&(e=s[b]=new i),f(a,b,g),d=e.get(a),d||(d=[],e.set(a,d)),d[d.length]=c}function e(a,b,c){var d,e,f;if(d=s[b],d&&(e=d.get(a))){for(f=e.length;f--;)e[f]===c&&e.splice(f,1);0===e.length&&(d.remove(a),0===d.count()&&g(a,b))}}function f(a,b,c){var d,e,f,g;if("submit"!==b||!u.has(a)){if(e=-1!==j.indexOf(r,b),d=l[b],f=s[b],null==d)g=function(a){var c,d,e,g,h,i;if(null!=f||(f=s[b],null!=f))for(c=o(a),d=-1,e=c.length-1;d++<e;)if(g=c[d],h=f.get(g),null!=h)for(i=h.length;i--;)a.currentTarget=g,h[i].call(g,a)};else if(g=function(a){var c,e,g,h,i,j,k;if(null!=f||(f=s[b],null!=f))for(c=o(a),e=-1,g=c.length-1;e++<g;)if(h=c[e],i=f.get(h),null!=i)for(j=i.length;j--;)k=d.create(a),k.currentTarget=h,i[j].call(h,k),k.isPersistent!==!0&&d.destroy(k)},"submit"!==b){if(!c)return;a=v,t[b]=g}else u.set(a,g);e?k.capture(a,b,g):k.on(a,b,g)}}function g(a,b){var c;"submit"!==b?(a=v,c=t[b],delete t[b]):(c=u.get(a),u.remove(a)),k.off(a,b,c)}function h(){n.currentScrollLeft=v.pageXOffset||w.documentElement.scrollLeft,n.currentScrollTop=v.pageYOffset||w.documentElement.scrollTop}var i=a("weak_map"),j=a("utils"),k=a("event_listener"),l=a("delegator/utils/event_class_map"),m=a("environment"),n=a("utils/viewport"),o=a("delegator/utils/get_path"),p=c.exports,q=/[\s]+/,r=["blur","error","focus","load","resize","scroll"],s={},t={},u=new i,v=m.window,w=m.document;p.on=function(a,b,c){for(var e=b.split(q),f=e.length;f--;)d(a,e[f],c)},p.off=function(a,b,c){for(var d=b.split(q),f=d.length;f--;)e(a,d[f],c)},k.on(v,"scroll",h),k.on(v,"resize",h)},function(a,b,c){var d,e=a("type"),f=a("create_weak_map"),g="undefined"!=typeof WeakMap?WeakMap:null;e.isNative(g)?(d=g,d.prototype.count=function(){return this.size}):(d=function h(){if(!(this instanceof h))throw new TypeError("Constructor WeakMap requires 'new'");this._map=f()},d.prototype.constructor=d,d.prototype.get=function(a){return this._map.get(a)},d.prototype.set=function(a,b){if(e.isPrimitive(a))throw new TypeError("Invalid value used as key");this._map.set(a,b)},d.prototype.has=function(a){return this._map.has(a)},d.prototype["delete"]=function(a){return this._map.remove(a)},d.prototype.clear=function(){this._map.clear()},Object.defineProperty&&Object.defineProperty(d.prototype,"size",{get:function(){return this._map.size()}}),d.prototype.count=function(){return this._map.size()},d.prototype.length=1),d.prototype.remove=d.prototype["delete"],c.exports=d},function(a,b,c){function d(a){var b;return null==a||"object"!=(b=typeof a)&&"function"!==b}function e(a,b){var c={identity:b},d=a.valueOf;return h(a,"valueOf",{value:function(a){return a!==b?d.apply(this,arguments):c},writable:!0}),c}function f(){function a(a){if(d(a))throw new TypeError("Invalid value used as key");return a.valueOf(c)||i}function b(a){var b;if(d(a))throw new TypeError("Invalid value used as key");return b=a.valueOf(c),b&&b.identity===c||(b=e(a,c),f+=1),b}var c={},f=0;return{get:function(b){return a(b).value},set:function(a,c){b(a).value=c},has:function(b){return g.call(a(b),"value")},remove:function(b){var c=a(b);return c===i?!0:(f-=1,delete c.value)},size:function(){return f},clear:function(){f=0,c={}}}}var g=Object.prototype.hasOwnProperty,h=Object.defineProperty,i={};c.exports=f,h||(h=function(a,b,c){a[b]=c.value})},function(a,b,c){var d,e,f,g=a("process"),h=a("type"),i=a("environment"),j=c.exports,k=/[\s]+/,l=i.document;j.on=function(a,b,c){for(var e=b.split(k),f=e.length;f--;)d(a,e[f],c)},j.capture=function(a,b,c){for(var d=b.split(k),f=d.length;f--;)e(a,d[f],c)},j.off=function(a,b,c){for(var d=b.split(k),e=d.length;e--;)f(a,d[e],c)},h.isFunction(l.addEventListener)?(d=function(a,b,c){a.addEventListener(b,c,!1)},e=function(a,b,c){a.addEventListener(b,c,!0)},f=function(a,b,c){a.removeEventListener(b,c,!1)}):h.isFunction(l.attachEvent)?(d=function(a,b,c){a.attachEvent("on"+b,c)},e=function(){if("development"===g.env.NODE_ENV)throw new Error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events.")},f=function(a,b,c){a.detachEvent("on"+b,c)}):(d=function(a,b,c){return a["on"+b]=c,a},e=function(){if("development"===g.env.NODE_ENV)throw new Error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events.")},f=function(a,b){return a["on"+b]=null,!0})},function(a,b,c){var d=a("events/synthetic_clipboard_event"),e=a("events/synthetic_drag_event"),f=a("events/synthetic_focus_event"),g=a("events/synthetic_input_event"),h=a("events/synthetic_keyboard_event"),i=a("delegator/synthetic_mouse_event"),j=a("events/synthetic_touch_event"),k=a("delegator/synthetic_ui_event"),l=a("events/synthetic_wheel_event");c.exports={copy:d,cut:d,paste:d,keydown:h,keyup:h,keypress:h,focus:f,blur:f,change:g,input:g,submit:g,click:i,doubleclick:i,mousedown:i,mouseenter:i,mouseleave:i,mousemove:i,mouseout:i,mouseover:i,mouseup:i,drag:e,dragend:e,dragenter:e,dragexit:e,dragleave:e,dragover:e,dragstart:e,dragdrop:e,touchcancel:j,touchend:j,touchmove:j,touchstart:j,scroll:k,wheel:l}},function(a,b,c,d){function e(){h.call(this)}function f(a){return null!=a.clipboardData?a.clipboardData:g.clipboardData}var g=d.window,h=a("delegator/synthetic_event"),i=h.prototype;c.exports=e,h.extend(e),e.prototype.construct=function(a){i.construct.call(this,a),this.clipboardData=f(a)},e.prototype.destruct=function(){i.destruct.call(this),this.clipboardData=null},e.prototype.toJSON=function(a){return a=i.toJSON.call(this,a),a.clipboardData=this.clipboardData,a}},function(a,b,c){function d(){this.destruct()}var e=a("utils"),f=a("utils/create_pool"),g=a("utils/get_event_target"),h=f(d);c.exports=d,d.create=function(a){var b=h.create();return b.construct(a),b},d.destroy=h.destroy,d.extend=function(a){var b=f(a);return a.extend=this.extend,a.create=function(a){var c=b.create();return c.construct(a),c},a.destroy=b.destroy,e.inherits(a,this)},d.prototype.construct=function(a){this.nativeEvent=a,this.type=a.type,this.target=g(a),this.currentTarget=a.currentTarget,this.eventPhase=a.eventPhase,this.bubbles=a.bubbles,this.cancelable=a.cancelable,this.timeStamp=a.timeStamp,this.defaultPrevented=null!=a.defaultPrevented?a.defaultPrevented:a.returnValue===!1,this.propagationStopped=!1,this.isTrusted=a.isTrusted,this.isPersistent=!1},d.prototype.destruct=function(){this.nativeEvent=null,this.type=null,this.target=null,this.currentTarget=null,this.eventPhase=null,this.bubbles=null,this.cancelable=null,this.timeStamp=null,this.defaultPrevented=null,this.propagationStopped=null,this.isTrusted=null,this.isPersistent=null},d.prototype.preventDefault=function(){var a=this.nativeEvent;a.preventDefault?a.preventDefault():a.returnValue=!1,this.defaultPrevented=!0},d.prototype.stopPropagation=function(){var a=this.nativeEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this.propagationStopped=!0},d.prototype.persist=function(){this.isPersistent=!0},d.prototype.stopImmediatePropagation=d.prototype.stopPropagation,d.prototype.toJSON=function(a){return a=a||{},a.type=this.type,a.target=this.target.id||this.target.className,a.currentTarget=this.currentTarget.id||this.currentTarget.className,a.eventPhase=this.eventPhase,a.bubbles=this.bubbles,a.cancelable=this.cancelable,a.timeStamp=this.timeStamp,a.defaultPrevented=this.defaultPrevented,a.propagationStopped=this.propagationStopped,a.isTrusted=this.isTrusted,a.isPersistent=this.isPersistent,a}},function(a,b,c){function d(a){var b=[];return{create:function(){return 0!==b.length?b.pop():new a},destroy:function(a){a.destruct(),b[b.length]=a}}}c.exports=d},function(a,b,c){function d(a){var b=a.target||a.srcElement||window;return 3===b.nodeType?b.parentNode:b}c.exports=d},function(a,b,c){function d(){e.call(this)}var e=a("delegator/synthetic_mouse_event"),f=e.prototype;c.exports=d,e.extend(d),d.prototype.construct=function(a){f.construct.call(this,a),this.dataTransfer=a.dataTransfer},d.prototype.destruct=function(){f.destruct.call(this),this.dataTransfer=null},d.prototype.toJSON=function(a){return a=f.toJSON.call(this,a),a.dataTransfer=this.dataTransfer,a}},function(a,b,c){function d(){i.call(this)}function e(a){return null!=a.pageX?a.pageX:a.clientX+j.currentScrollLeft}function f(a){return null!=a.pageX?a.pageY:a.clientY+j.currentScrollTop}function g(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)}function h(a){var b=a.button;return null!=a.which?b:2===b?2:4===b?1:0}var i=a("delegator/synthetic_ui_event"),j=a("utils/viewport"),k=i.prototype;c.exports=d,i.extend(d),d.prototype.construct=function(a){k.construct.call(this,a),this.screenX=a.screenX,this.screenY=a.screenY,this.clientX=a.clientX,this.clientY=a.clientY,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.altKey=a.altKey,this.metaKey=a.metaKey,this.button=h(a),this.buttons=a.buttons,this.relatedTarget=g(a),this.pageX=e(a),this.pageY=f(a)},d.prototype.destruct=function(){k.destruct.call(this),this.screenX=null,this.screenY=null,this.clientX=null,this.clientY=null,this.ctrlKey=null,this.shiftKey=null,this.altKey=null,this.metaKey=null,this.button=null,this.buttons=null,this.relatedTarget=null,this.pageX=null,this.pageY=null},d.prototype.getModifierState=a("delegator/get_event_modifier_state"),d.prototype.toJSON=function(a){return a=k.toJSON.call(this,a),a.screenX=this.screenX,a.screenY=this.screenY,a.clientX=this.clientX,a.clientY=this.clientY,a.ctrlKey=this.ctrlKey,a.shiftKey=this.shiftKey,a.altKey=this.altKey,a.metaKey=this.metaKey,a.button=this.button,a.buttons=this.buttons,a.relatedTarget=this.relatedTarget.id||this.relatedTarget.className,a.pageX=this.pageX,a.pageY=this.pageY,a}},function(a,b,c){function d(){g.call(this)}function e(a){var b,c;return a.view?a.view:(b=f(a),null!=b&&b.window===b?b:(c=b.ownerDocument,c?c.defaultView||c.parentWindow:window))}var f=a("utils/get_event_target"),g=a("delegator/synthetic_event"),h=g.prototype;c.exports=d,g.extend(d),d.prototype.construct=function(a){h.construct.call(this,a),this.view=e(a),this.detail=a.detail||0},d.prototype.destruct=function(){h.destruct.call(this),this.view=null,this.detail=null},d.prototype.toJSON=function(a){return a=h.toJSON.call(this,a),a.view=this.view,a.detail=this.detail,a}},function(a,b,c){var d=c.exports;d.currentScrollLeft=0,d.currentScrollTop=0},function(a,b,c){function d(a){var b,c=this.nativeEvent;return null!=c.getModifierState?c.getModifierState(a):(b=e[a],b?!!c[b]:!1)}var e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};c.exports=d},function(a,b,c){function d(){e.call(this)}var e=a("delegator/synthetic_ui_event"),f=e.prototype;c.exports=d,e.extend(d),d.prototype.construct=function(a){f.construct.call(this,a),this.relatedTarget=a.relatedTarget},d.prototype.destruct=function(){f.destruct.call(this),this.relatedTarget=null},d.prototype.toJSON=function(a){return a=f.toJSON.call(this,a),a.dataTransfer=this.dataTransfer,a}},function(a,b,c){function d(){e.call(this)}var e=a("delegator/synthetic_event"),f=e.prototype;c.exports=d,e.extend(d),d.prototype.construct=function(a){f.construct.call(this,a),this.data=a.data},d.prototype.destruct=function(){f.destruct.call(this),this.data=null},d.prototype.toJSON=function(a){return a=f.toJSON.call(this,a),a.data=this.data,a}},function(a,b,c){function d(){h.call(this)}function e(a){return"keypress"===a.type?j(a):0}function f(a){var b=a.type;return"keydown"===b||"keyup"===b?a.keyCode:0}function g(a){var b=a.type;return"keypress"===b?j(event):"keydown"===b||"keyup"===b?a.keyCode:0}var h=a("delegator/synthetic_ui_event"),i=a("utils/get_event_key"),j=a("delegator/get_event_char_code"),k=h.prototype;c.exports=d,h.extend(d),d.prototype.construct=function(a){k.construct.call(this,a),this.key=i(a),this.location=a.location,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.altKey=a.altKey,this.metaKey=a.metaKey,this.repeat=a.repeat,this.locale=a.locale,this.charCode=e(a),this.keyCode=f(a),this.which=g(a)},d.prototype.destruct=function(){k.destruct.call(this),this.key=null,this.location=null,this.ctrlKey=null,this.shiftKey=null,this.altKey=null,this.metaKey=null,this.repeat=null,this.locale=null,this.charCode=null,this.keyCode=null,this.which=null},d.prototype.getModifierState=a("delegator/get_event_modifier_state"),d.prototype.toJSON=function(a){return a=k.toJSON.call(this,a),a.key=this.key,a.location=this.location,a.ctrlKey=this.ctrlKey,a.shiftKey=this.shiftKey,a.altKey=this.altKey,a.metaKey=this.metaKey,a.repeat=this.repeat,a.locale=this.locale,a.charCode=this.charCode,a.keyCode=this.keyCode,a.which=this.which,a.key=this.key,a}},function(a,b,c){function d(a){var b,c;return a.key&&(b=e[a.key]||a.key,"Unidentified"!==b)?b:"keypress"===a.type?(c=g(a),13===c?"Enter":String.fromCharCode(c)):"keydown"===a.type||"keyup"===a.type?f[a.keyCode]||"Unidentified":""}var e,f,g=a("delegator/get_event_char_code");c.exports=d,e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"}},function(a,b,c){function d(a){var b,c=a.keyCode;return null!=a.charCode?(b=a.charCode,0===b&&13===c&&(b=13)):b=c,b>=32||13===b?b:0}c.exports=d},function(a,b,c){function d(){h.call(this)}function e(a,b){for(var c=-1,d=a.length-1;c++<d;)b[c]=a[c].toJSON(b[c]);return b}function f(a,b){for(var c=-1,d=b.length-1;c++<d;)a[c]=i.create(b[c]);return a}function g(a){var b;if(!a)return null;for(;b--;)i.destroy(a[b]);return a.length=0,a}var h=a("delegator/synthetic_ui_event"),i=a("delegator/synthetic_touch"),j=h.prototype;c.exports=d,h.extend(d),d.prototype.construct=function(a){j.construct.call(this,a),this.touches=f(this.touches||[],a.touches),this.targetTouches=f(this.targetTouches||[],a.targetTouches),this.changedTouches=f(this.changedTouches||[],a.changedTouches),this.altKey=a.altKey,this.metaKey=a.metaKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey},d.prototype.destruct=function(){j.destruct.call(this),this.touches=g(this.touches),this.targetTouches=g(this.targetTouches),this.changedTouches=g(this.changedTouches),this.altKey=null,this.metaKey=null,this.ctrlKey=null,this.shiftKey=null},d.prototype.getModifierState=a("delegator/get_event_modifier_state"),d.prototype.toJSON=function(a){return a=j.toJSON.call(this,a),a.touches=e(this.touches,a.touches||[]),a.targetTouches=e(this.targetTouches,a.targetTouches||[]),a.changedTouches=e(this.changedTouches,a.changedTouches||[]),a.altKey=this.altKey,a.metaKey=this.metaKey,a.ctrlKey=this.ctrlKey,a.shiftKey=this.shiftKey,a}},function(a,b,c){function d(){this.destruct()}function e(a){return null!=a.pageX?a.pageX:a.clientX+l.currentScrollLeft}function f(a){return null!=a.pageX?a.pageY:a.clientY+l.currentScrollTop}function g(a){return null!=a.radiusX?a.radiusX:null!=a.webkitRadiusX?a.webkitRadiusX:null!=a.mozRadiusX?a.mozRadiusX:null!=a.msRadiusX?a.msRadiusX:null!=a.oRadiusX?a.oRadiusX:0}function h(a){return null!=a.radiusY?a.radiusY:null!=a.webkitRadiusY?a.webkitRadiusY:null!=a.mozRadiusY?a.mozRadiusY:null!=a.msRadiusY?a.msRadiusY:null!=a.oRadiusY?a.oRadiusY:0}function i(a){return null!=a.rotationAngle?a.rotationAngle:null!=a.webkitRotationAngle?a.webkitRotationAngle:null!=a.mozRotationAngle?a.mozRotationAngle:null!=a.msRotationAngle?a.msRotationAngle:null!=a.oRotationAngle?a.oRotationAngle:0}function j(a){return null!=a.force?a.force:null!=a.webkitForce?a.webkitForce:null!=a.mozForce?a.mozForce:null!=a.msForce?a.msForce:null!=a.oForce?a.oForce:1}var k=a("utils/create_pool"),l=a("utils/viewport"),m=k(d);c.exports=d,d.create=function(a){var b=m.create();return b.construct(a),b},d.destroy=m.destroy,d.prototype.construct=function(a){this.nativeTouch=a,this.identifier=a.identifier,this.screenX=a.screenX,this.screenY=a.screenY,this.clientX=a.clientX,this.clientY=a.clientY,this.pageX=e(a),this.pageY=f(a),this.radiusX=g(a),this.radiusY=h(a),this.rotationAngle=i(a),this.force=j(a),this.target=a.target},d.prototype.destruct=function(){this.nativeTouch=null,this.identifier=null,this.screenX=null,this.screenY=null,this.clientX=null,this.clientY=null,this.pageX=null,this.pageY=null,this.radiusX=null,this.radiusY=null,this.rotationAngle=null,this.force=null,this.target=null},d.prototype.toJSON=function(a){return a=a||{},a.identifier=this.identifier,a.screenX=this.screenX,a.screenY=this.screenY,a.clientX=this.clientX,a.clientY=this.clientY,a.pageX=this.pageX,a.pageY=this.pageY,a.radiusX=this.radiusX,a.radiusY=this.radiusY,a.rotationAngle=this.rotationAngle,a.force=this.force,a.target=this.target.id||this.target.className,a}},function(a,b,c){function d(){g.call(this)}function e(a){return null!=a.deltaX?a.deltaX:null!=a.wheelDeltaX?-a.wheelDeltaX:0}function f(a){return null!=a.deltaY?a.deltaY:null!=a.wheelDeltaY?-a.wheelDeltaY:null!=a.wheelDelta?-a.wheelDelta:0}var g=a("delegator/synthetic_mouse_event"),h=g.prototype;c.exports=d,g.extend(d),d.prototype.construct=function(a){h.construct.call(this,a),this.deltaX=e(a),this.deltaY=f(a),this.deltaZ=a.deltaZ,this.deltaMode=a.deltaMode},d.prototype.destruct=function(){h.destruct.call(this),this.deltaX=null,this.deltaY=null,this.deltaZ=null,this.deltaMode=null},d.prototype.toJSON=function(a){return a=h.toJSON.call(this,a),a.deltaX=this.deltaX,a.deltaY=this.deltaY,a.deltaZ=this.deltaZ,a.deltaMode=this.deltaMode,a}},function(a,b,c){function d(a){var b=a.path,c=f(a);if(e.isArray(b))return b;if(e.isDocument(c)||e.isWindow(c))return[c];for(b=[];c;)b[b.length]=c,c=c.parentNode;return b}var e=a("type"),f=a("utils/get_event_target");c.exports=d},function(a,b,c){function d(){this.destruct()}var e=a("vec2");c.exports=d,d.create=function(){return(new d).construct()},d.prototype.construct=function(){return this.position=e.create(),this.delta=e.create(),this.mouse=0,this.__first=!1,this},d.prototype.destruct=function(){return this.position=null,this.delta=null,this.mouse=null,this.__first=null,this},d.prototype.update=function(a){var b=this.__first,c=this.position,d=this.delta,e=a.target,f=e.offsetLeft||0,g=e.offsetTop||0,h=a.pageX-f,i=a.pageY-g,j=b?c[0]:h,k=b?c[1]:i;c[0]=h,c[1]=i,d[0]=h-j,d[1]=i-k,this.__first=!0}},function(a,b,c){var d=a("mathf"),e=c.exports;e.create=function(a,b){var c=new d.ArrayType(2);return c[0]=void 0!==a?a:0,c[1]=void 0!==b?b:0,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.clone=function(a){var b=new d.ArrayType(2);return b[0]=a[0],b[1]=a[1],b},e.set=function(a,b,c){return a[0]=void 0!==b?b:0,a[1]=void 0!==c?c:0,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],b},e.sub=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.mul=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.div=function(a,b,c){var d=c[0],e=c[1];return a[0]=b[0]*(0!==d?1/d:d),a[1]=b[1]*(0!==e?1/e:e),a},e.sadd=function(a,b,c){return a[0]=b[0]+c,a[1]=b[1]+c,b},e.ssub=function(a,b,c){return a[0]=b[0]-c,a[1]=b[1]-c,a},e.smul=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.sdiv=function(a,b,c){return c=0!==c?1/c:c,a[0]=b[0]*c,a[1]=b[1]*c,a},e.lengthSqValues=function(a,b){return a*a+b*b},e.lengthValues=function(a,b){var c=e.lengthSqValues(a,b);return 0!==c?d.sqrt(c):c},e.invLengthValues=function(a,b){var c=e.lengthSqValues(a,b);return 0!==c?1/d.sqrt(c):c},e.cross=function(a,b){return a[0]*b[1]-a[1]*b[0]},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.lengthSq=function(a){return e.dot(a,a)},e.length=function(a){var b=e.lengthSq(a);return 0!==b?d.sqrt(b):b},e.invLength=function(a){var b=e.lengthSq(a);return 0!==b?1/d.sqrt(b):b},e.setLength=function(a,b,c){var d=b[0],f=b[1],g=c*e.invLengthValues(d,f);return a[0]=d*g,a[1]=f*g,a},e.normalize=function(a,b){var c=b[0],d=b[1],f=e.invLengthValues(c,d);return a[0]=c*f,a[1]=d*f,a},e.inverse=function(a,b){return a[0]=-1*b[0],a[1]=-1*b[1],a},e.lerp=function(a,b,c,e){var f=d.lerp;return a[0]=f(b[0],c[0],e),a[1]=f(b[1],c[1],e),a},e.perp=function(a,b){return a[0]=-b[1],a[1]=b[0],a},e.perpL=function(a,b){return a[0]=b[1],a[1]=-b[0],a},e.min=function(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1];return a[0]=d>f?f:d,a[1]=e>g?g:e,a},e.max=function(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1];return a[0]=f>d?f:d,a[1]=g>e?g:e,a},e.clamp=function(a,b,c,d){var e=b[0],f=b[1],g=c[0],h=c[1],i=d[0],j=d[1];return a[0]=g>e?g:e>i?i:e,a[1]=h>f?h:f>j?j:f,a},e.transformAngle=function(a,b,c){var e=b[0],f=b[1],g=d.cos(c),h=d.sin(c);return a[0]=e*g-f*h,a[1]=e*h+f*g,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=d*c[0]+e*c[2],a[1]=d*c[1]+e*c[3],a},e.transformMat32=function(a,b,c){var d=b[0],e=b[1];return a[0]=d*c[0]+e*c[2]+c[4],a[1]=d*c[1]+e*c[3]+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=d*c[0]+e*c[3]+c[6],a[1]=d*c[1]+e*c[4]+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=d*c[0]+e*c[4]+c[12],a[1]=d*c[1]+e*c[5]+c[13],a},e.transformProjection=function(a,b,c){var d=b[0],e=b[1],f=d*c[3]+e*c[7]+c[11]+c[15];return f=0!==f?1/f:f,a[0]=(d*c[0]+e*c[4]+c[12])*f,a[1]=(d*c[1]+e*c[5]+c[13])*f,a},e.positionFromMat32=function(a,b){return a[0]=b[4],a[1]=b[5],a},e.positionFromMat4=function(a,b){return a[0]=b[12],a[1]=b[13],a},e.scaleFromMat2=function(a,b){return a[0]=e.lengthValues(b[0],b[2]),a[1]=e.lengthValues(b[1],b[3]),a},e.scaleFromMat32=e.scaleFromMat2,e.scaleFromMat3=function(a,b){return a[0]=e.lengthValues(b[0],b[3]),a[1]=e.lengthValues(b[1],b[4]),a},e.scaleFromMat4=function(a,b){return a[0]=e.lengthValues(b[0],b[4]),a[1]=e.lengthValues(b[1],b[5]),a},e.equal=function(a,b){return!(a[0]!==b[0]||a[1]!==b[1])},e.notEqual=function(a,b){return a[0]!==b[0]||a[1]!==b[1]},e.str=function(a){return"Vec2("+a[0]+", "+a[1]+")"}},function(a,b,c){function d(){this.destruct()}function e(a,b){var c=g.create(b),d=a.__array;return d[d.length]=c,a.__hash[b]=c,c}function f(a,b){for(var c=-1,d=a.length-1;c++<d;)b[c]=a[c].toJSON(b[c]);return b}var g=a("input/button");c.exports=d,d.create=function(){return(new d).construct()},d.prototype.construct=function(){return this.__array=[],this.__hash={},e(this,"mouse0"),e(this,"mouse1"),e(this,"mouse2"),this},d.prototype.destruct=function(){return this.__array=null,this.__hash=null,this},d.prototype.on=function(a,b,c){return(this.__hash[a]||e(this,a)).on(b,c)},d.prototype.off=function(a,b,c){return(this.__hash[a]||e(this,a)).off(b,c)},d.prototype.allOff=function(a,b){for(var c=this.__array,d=-1,e=c.length-1;d++<e;)c[d].off(a,b);return this},d.prototype.toJSON=function(a){return a=a||{},a.array=f(this.__array,a.array||[]),a},d.prototype.fromJSON=function(a){var b,c=a.array,d=-1,e=c.length-1,f=this.__array,h=this.__hash={};for(f.length=0;d++<e;)b=new g,b.fromJSON(c[d]),f[f.length]=b,h[b.name]=b;return this}},function(a,b,c){function d(){this.destruct()}c.exports=d,d.create=function(a){return(new d).construct(a)},d.prototype.construct=function(a){return this.name=a,this.timeDown=-1,this.timeUp=-1,this.frameDown=-1,this.frameUp=-1,this.value=!1,this.__first=!0,this},d.prototype.destruct=function(){return this.name=null,this.timeDown=null,this.timeUp=null,this.frameDown=null,this.frameUp=null,this.value=null,this.__first=null,this},d.prototype.on=function(a,b){return this.__first&&(this.frameDown=b,this.timeDown=a,this.__first=!1),this.value=!0,this},d.prototype.off=function(a,b){return this.frameUp=b,this.timeUp=a,this.value=!1,this.__first=!0,this},d.prototype.toJSON=function(a){return a=a||{},a.name=this.name,a.timeDown=this.timeDown,a.timeUp=this.timeUp,a.frameDown=this.frameDown,a.frameUp=this.frameUp,a.value=this.value,a},d.prototype.fromJSON=function(a){return this.name=a.name,this.timeDown=a.timeDown,this.timeUp=a.timeUp,this.frameDown=a.frameDown,this.frameUp=a.frameUp,this.value=a.value,this.__first=!0,this}},function(a,b,c){function d(){this.destruct()}function e(a,b){for(var c=-1,d=a.length-1;c++<d;)b[c]=a[c].toJSON(b[c]);return b}var f=a("input/axis");c.exports=d,d.create=function(){return(new d).construct()},d.prototype.construct=function(){return this.__array=[],this.__hash={},this.add({name:"horizontal",posButton:"right",negButton:"left",altPosButton:"d",altNegButton:"a",type:f.ButtonType}),this.add({name:"vertical",posButton:"up",negButton:"down",altPosButton:"w",altNegButton:"s",type:f.ButtonType}),this.add({name:"fire",posButton:"ctrl",negButton:"",altPosButton:"mouse0",altNegButton:"",type:f.ButtonType}),this.add({name:"jump",posButton:"space",negButton:"",altPosButton:"mouse2",altNegButton:"",type:f.ButtonType}),this.add({name:"mouseX",type:f.MouseType,axis:0}),this.add({name:"mouseY",type:f.MouseType,axis:1}),this.add({name:"touchX",type:f.TouchType,axis:0}),this.add({name:"touchY",type:f.TouchType,axis:1}),this.add({name:"mouseWheel",type:f.WheelType}),this},d.prototype.destruct=function(){return this.__array=null,this.__hash=null,this},d.prototype.add=function(a){var b,c=this.__hash,d=this.__array;if(a=a||{},c[name])throw new Error("Axes add(): Axes already have Axis named "+name+' use Axes.get("'+name+'") and edit it instead');return b=f.create(a.name,a.negButton,a.posButton,a.altNegButton,a.altPosButton,a.gravity,a.sensitivity,a.dead,a.type,a.axis,a.index,a.joyNum),d[d.length]=b,c[b.name]=b,b},d.prototype.get=function(a){return this.__hash[a]},d.prototype.update=function(a,b){for(var c=this.__array,d=-1,e=c.length-1;d++<e;)c[d].update(a,b);return this},d.prototype.toJSON=function(a){return a=a||{},a.array=e(this.__array,a.array||[]),a},d.prototype.fromJSON=function(a){var b,c=a.array,d=-1,e=c.length-1,g=this.__array,h=this.__hash={};for(g.length=0;d++<e;)b=new f,b.fromJSON(c[d]),g[g.length]=b,h[b.name]=b;return this}},function(a,b,c){function d(){this.destruct()}var e=a("mathf");c.exports=d,d.ButtonType=1,d.MouseType=2,d.TouchType=3,d.WheelType=4,d.JoystickType=5,d.create=function(a,b,c,e,f,g,h,i,j,k,l,m){return(new d).construct(a,b,c,e,f,g,h,i,j,k,l,m)},d.prototype.construct=function(a,b,c,e,f,g,h,i,j,k,l,m){return this.name=null!=a?a:"unknown",this.negButton=null!=b?b:"",this.posButton=null!=c?c:"",this.altNegButton=null!=e?e:"",this.altPosButton=null!=f?f:"",this.gravity=null!=g?g:3,this.sensitivity=null!=h?h:3,this.dead=null!=i?i:.001,this.type=null!=j?j:d.ButtonType,this.axis=null!=k?k:"x",this.index=null!=l?l:0,this.joyNum=null!=m?m:0,this.value=0,this},d.prototype.destruct=function(){return this.name=null,this.negButton=null,this.posButton=null,this.altNegButton=null,this.altPosButton=null,this.gravity=null,this.sensitivity=null,this.dead=null,this.type=null,this.axis=null,this.index=null,this.joyNum=null,this.value=null,this},d.prototype.update=function(a,b){var c,f,g,h,i,j,k=this.value,l=this.type,m=this.sensitivity;if(l===d.ButtonType)c=a.buttons.__hash,button=c[this.negButton],f=c[this.altNegButton],g=button&&button.value||f&&f.value,button=c[this.posButton],f=c[this.altPosButton],h=button&&button.value||f&&f.value;else{if(l===d.MouseType)return this.value=a.mouse.delta[this.axis],this;if(l===d.TouchType){if(i=a.touches[this.index],!i)return this;this.value=i.delta[this.axis]}else if(l===d.WheelType)k+=a.mouse.wheel;else if(l===d.JoystickType)return this}return g&&(k-=m*b),h&&(k+=m*b),h||g||0===k||(j=e.abs(k),k-=e.clamp(e.sign(k)*this.gravity*b,-j,j)),k=e.clamp(k,-1,1),e.abs(k)<=this.dead&&(k=0),this.value=k,this}},function(a,b,c){var d=a("mathf"),e=a("input/key_codes"),f=c.exports,g=["mouse0","mouse1","mouse2"];f.keyup=function(a,b,c,d){var f=e[b.keyCode],g=a.buttons.off(f,c,d);a.emit("keyup",b,g)},f.keydown=function(a,b,c,d){var f=e[b.keyCode],g=a.buttons.on(f,c,d);a.emit("keydown",b,g)},f.mousemove=function(a,b){a.__mouseMoveNeedsUpdate=!1,a.mouse.update(b),a.emit("mousemove",b,a.mouse)},f.mousedown=function(a,b,c,d){var e=a.buttons.on(g[b.button],c,d);a.emit("mousedown",b,e)},f.mouseup=function(a,b,c,d){var e=a.buttons.off(g[b.button],c,d);a.emit("mouseup",b,e)},f.mouseout=function(a,b,c,d){a.mouse.update(b),a.buttons.allOff(c,d),a.emit("mouseout",b)},f.wheel=function(a,b){a.mouse.wheel=d.sign(b.deltaY),a.emit("wheel",b)},f.touchstart=function(){},f.touchend=function(){},f.touchcancel=function(){},f.touchmove=function(){},f.devicemotion=function(a,b){var c,d=b.accelerationIncludingGravity;d&&(d.x||d.y||d.z)&&(c=a.acceleration,c.x=d.x,c.y=d.y,c.z=d.z,a.emit("acceleration",b,c))}},function(a,b,c){c.exports={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num",59:";",61:"-",173:"="}
},function(a,b,c){function d(){var a=this,b=1,c=1/60,d=1/60,e=0,f=-1/60,g=0,h=1/60,i=0,j=0,k=1e-6,l=1;this.time=0,this.fps=60,this.delta=1/60,this.frameCount=0,this.update=function(){a.frameCount=e++,f=a.time,g=a.now(),i++,g>j+1e3&&(a.fps=i/(g-j),j=g,i=0),h=(g-f)*a.scale,a.delta=k>h?k:h>l?l:h,a.time=g*a.scale},Object.defineProperty(this,"scale",{enumerable:!0,configurable:!1,get:function(){return b},set:function(a){b=a,d=c*a}}),Object.defineProperty(this,"fixedDelta",{enumerable:!0,configurable:!1,get:function(){return d},set:function(a){c=a,d=c*b}})}var e=a("time");c.exports=d,d.create=function(){return new d},Object.defineProperty(d.prototype,"sinceStart",{enumerable:!0,configurable:!1,get:function(){return e.now()}}),Object.defineProperty(d.prototype,"start",{enumerable:!0,configurable:!1,writable:!1,value:e.stamp()}),d.prototype.now=function(){return.001*e.now()},d.prototype.stamp=function(){return.001*e.stamp()}},function(a,b,c){function d(a,b){function c(){f=e(d,b)}function d(b){a(b),g&&c()}var f=null,g=!1;return{run:function(){g===!1&&(g=!0,c())},pause:function(){g=!1,f&&e.cancel(f)},isRunning:function(){return g},isPaused:function(){return!g}}}var e=a("request_animation_frame");c.exports=d},function(a,b,c,d){var e,f,g,h=a("environment"),i=a("time"),j=h.window,k=j.requestAnimationFrame||j.webkitRequestAnimationFrame||j.mozRequestAnimationFrame||j.oRequestAnimationFrame||j.msRequestAnimationFrame,l=j.cancelAnimationFrame||j.cancelRequestAnimationFrame||j.webkitCancelAnimationFrame||j.webkitCancelRequestAnimationFrame||j.mozCancelAnimationFrame||j.mozCancelRequestAnimationFrame||j.oCancelAnimationFrame||j.oCancelRequestAnimationFrame||j.msCancelAnimationFrame||j.msCancelRequestAnimationFrame;k?e=function(a,b){return k.call(j,a,b)}:(g=Math.max,f=0,e=function(a){var b=i.now(),c=g(0,16-(b-f)),e=d.setTimeout(function(){a(b+c)},c);return f=b+c,e}),e.cancel=l?function(a){return l.call(j,a)}:function(a){return d.clearTimeout(a)},c.exports=e},function(a,b,c){function d(){h.call(this)}var e=a("type"),f=a("./base/class"),g=a("./application/canvas"),h=a("./application/base_application"),i=h.prototype;c.exports=d,h.extend(d,"Application"),d.prototype.construct=function(a){return a=a||{},this.canvas=a.useCanvas===!1?null:g.create(a.canvas),i.construct.call(this),this},d.prototype.destruct=function(){return i.destruct.call(this),this.scene=null,this.camera=null,this.canvas=null,this},d.prototype.setScene=function(a){var b=this.__scenes,c=this.__sceneHash;if(e.isString(a)?a=c[a]:e.isNumber(a)&&(a=b[a]),!c[a.name])throw new Error("Application.setScene(scene) Scene could not be found in Application");return this.scene&&this.scene.destroy(),a=f.createFromJSON(a),this.scene=a,a.application=this,a.init(),this.emit("setScene",a),this},d.prototype.setCamera=function(a){var b,c=this.scene,d=this.camera;if(!c)throw new Error("Application.setCamera: can't set camera without an active scene, use Application.setScene first");if(!c.has(a))throw new Error("Application.setCamera: SceneObject is not a member of the active Scene, adding it...");if(b=this.camera=a.getComponent("camera")||a.getComponent("camera2d"),!b)throw new Error("Application.setCamera: SceneObject does't have a Camera or a Camera2D Component");return b.__active=!0,d&&(d.__active=!1),this.emit("setCamera",b),this},d.prototype.init=function(){return i.init.call(this),this},d.prototype.loop=function(){{var a=this.scene;this.camera}a&&a.update()}},function(a,b,c){function d(a,b,c){var d=r.createElement("meta"),e=r.head;a&&(d.id=a),b&&(d.name=b),c&&(d.content=c),e.insertBefore(d,e.firstChild)}function e(){h.setAttribute("content",k.replace(s,"-scale="+1/(q.devicePixelRatio||1))),i.setAttribute("content","width="+q.innerWidth),j.setAttribute("content","height="+q.innerHeight),q.scrollTo(0,1)}function f(){o.call(this)}function g(a){var b,c,d=q.innerWidth,e=q.innerHeight,f=d/e,g=a.element,h=g.style;a.fullScreen?(b=d,c=e,a.aspect=f):f>a.aspect?(b=e*a.aspect,c=e):(b=d,c=d/a.aspect),a.pixelWidth=0|b,a.pixelHeight=0|c,g.width=b,g.height=c,h.marginLeft=-(.5*(b+1)|0)+"px",h.marginTop=-(.5*(c+1)|0)+"px",h.width=(0|b)+"px",h.height=(0|c)+"px",a.emit("resize")}var h,i,j,k,l=a("type"),m=a("environment"),n=a("event_listener"),o=a("./base/class"),p=o.prototype,q=m.window,r=m.document,s=/-scale\s *=\s*[.0-9]+/g,t=["position: fixed;","top: 50%;","left: 50%;","padding: 0px;","margin-left: 0px;","margin-top: 0px;"].join("\n");d("viewport","viewport","initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"),d("viewport-width","viewport","width=device-width"),d("viewport-height","viewport","height=device-height"),h=r.getElementById("viewport"),i=r.getElementById("viewport-width"),j=r.getElementById("viewport-height"),k=h.getAttribute("content"),n.on(q,"resize orientationchange",e),e(),c.exports=f,o.extend(f),f.prototype.construct=function(a){var b=this,c=r.createElement("canvas");return a=a||{},p.construct.call(this),c.style.cssText=t,a.disableContextMenu===!0&&(c.oncontextmenu=function(){return!1}),r.body.appendChild(c),this.element=c,this.fullScreen=a.fullScreen?a.fullScreen:null==a.width&&null==a.height?!0:!1,this.width=l.isNumber(a.width)?a.width:q.innerWidth,this.height=l.isNumber(a.height)?a.height:q.innerHeight,this.aspect=this.width/this.height,this.pixelWidth=this.width,this.pixelHeight=this.height,this.__handler=function(){g(b)},n.on(q,"resize orientationchange",this.__handler),g(b),this},f.prototype.destruct=function(){return p.destruct.call(this),this.element=null,this.fullScreen=null,this.width=null,this.height=null,this.aspect=null,this.pixelWidth=null,this.pixelHeight=null,n.off(q,"resize orientationchange",this.__handler),this.__handler=null,this}},function(a,b,c){function d(){k.call(this)}function e(a,b){var c=b.memberName,d=a.__componentHash,e=a.__components,f=a.scene;if(d[c])throw new Error("SceneObject addComponent(...components) trying to add components that is already a member of SceneObject");b.sceneObject=a,e[e.length]=b,d[c]=b,f&&f.__addComponent(b),b.init()}function f(a,b){var c=b.memberName,d=a.__componentHash,e=a.__components,f=e.indexOf(e,b),g=a.scene;if(-1!==f)throw new Error("SceneObject removeComponent(...components) trying to remove component that is already not a member of SceneObject");g&&g.__removeComponent(b),b.sceneObject=null,e.splice(f,1),delete d[c]}function g(a,b){var c=a.children,d=j.indexOf(c,b),e=a,f=0,g=a.scene;if(-1!==d)throw new Error("SceneObject add(...sceneObjects) trying to add object that is already a member of SceneObject");for(b.parent&&b.parent.remove(b),c[c.length]=b,b.parent=a;e.parent;)e=e.parent,f++;a.root=e,b.root=e,i(a,f),a.emit("addChild",b),g&&g.add(b)}function h(a,b){var c=a.children,d=j.indexOf(c,b),e=a.scene;if(-1===d)throw new Error("SceneObject remove(...sceneObjects) trying to remove object that is not a member of SceneObject");c.splice(d,-1),b.parent=null,b.root=b,i(b,0),a.emit("removeChild",b),e&&e.remove(b)}function i(a,b){var c=a.children,d=c.length;for(a.depth=b;d--;)i(c[d],b+1)}var j=a("utils"),k=a("./base/class"),l=k.prototype;c.exports=d,k.extend(d,"SceneObject"),d.prototype.construct=function(a){return l.construct.call(this),this.name=a||"SceneObject"+this.__id,this.__components=[],this.__componentHash={},this.depth=0,this.scene=null,this.root=this,this.parent=null,this.children=[],this},d.prototype.destruct=function(){return l.destruct.call(this),this.name=null,this.__components=null,this.__componentHash=null,this.depth=null,this.scene=null,this.root=null,this.parent=null,this.children=null,this},d.prototype.destroy=function(){var a=this.scene;return a?(this.emit("destroy"),a.remove(this),this):this},d.prototype.hasComponent=function(a){return!!this.__componentHash[a]},d.prototype.getComponent=function(a){return this.__componentHash[a]},d.prototype.addComponent=function(){for(var a=-1,b=arguments.length-1;a++<b;)e(this,arguments[a]);return this},d.prototype.removeComponent=function(){for(var a=-1,b=arguments.length-1;a++<b;)f(this,arguments[a]);return this},d.prototype.add=function(){for(var a=-1,b=arguments.length-1;a++<b;)g(this,arguments[a]);return this},d.prototype.remove=function(){for(var a=-1,b=arguments.length-1;a++<b;)h(this,arguments[a]);return this},d.prototype.toJSON=function(a){var b,c,d=this.__components,e=this.children,f=-1,g=d.length-1;for(a=l.toJSON.call(this,a),b=a.components||(a.components=[]);f++<g;)b[f]=d[f].toJSON(b[f]);for(f=-1,g=e.length-1,c=a.children||(a.children=[]);f++<g;)c[f]=e[f].toJSON(c[f]);return a.name=this.name,a},d.prototype.fromJSON=function(a){var b=a.components,c=a.children,d=-1,e=b.length-1;for(l.fromJSON.call(this,a);d++<e;)this.addComponent(k.createFromJSON(b[d]));for(d=-1,e=c.length-1;d++<e;)this.add(k.createFromJSON(c[d]));return this.name=a.name,this}},function(a,b,c){function d(){e.call(this)}var e=a("./base/class"),f=a("./base/helpers"),g=a("./scene_graph/component_managers/component_manager"),h=e.prototype;c.exports=d,d.onExtend=function(a,b,c){a.memberName=a.prototype.memberName=f.camelize(a.className,!0),a.manager=a.prototype.manager=c||g},e.extend(d,"Component"),d.className=d.prototype.className="Component",d.memberName=d.prototype.memberName=f.camelize(d.className,!0),d.manager=d.prototype.manager=g,d.prototype.construct=function(){return h.construct.call(this),this},d.prototype.destruct=function(){return h.destruct.call(this),this.sceneObject=null,this},d.prototype.init=function(){return this.emit("init"),this},d.prototype.awake=function(){return this.emit("awake"),this},d.prototype.update=function(){return this.emit("update"),this},d.prototype.destroy=function(){var a=this.sceneObject;return a?(this.emit("destroy"),a.removeComponent(this),this):this}},function(a,b,c){function d(){f.call(this)}var e=a("utils"),f=a("./base/class"),g=f.prototype;c.exports=d,d.onExtend=function(a,b,c){a.order=a.prototype.order=null!=c?c:0},f.extend(d,"ComponentManager"),d.order=d.prototype.order=0,d.prototype.construct=function(){return g.construct.call(this),this.__components=[],this},d.prototype.destruct=function(){return g.destruct.call(this),this.__components=null,this},d.prototype.isEmpty=function(){return 0===this.__components.length},d.prototype.__sort=function(){return this.__components.sort(this.sort),this},d.prototype.sort=function(a,b){return a.__id-b.__id},d.prototype.init=function(){for(var a=this.__components,b=-1,c=a.length-1;b++<c;)a[b].init();return this},d.prototype.update=function(){for(var a=this.__components,b=-1,c=a.length-1;b++<c;)a[b].update();return this},d.prototype.forEach=function(a){for(var b=this.__components,c=-1,d=b.length-1;c++<d;)if(a(b[c],c)===!1)return!1;return!0},d.prototype.add=function(a){var b=this.__components,c=e.indexOf(b,a);-1===c&&(b[b.length]=a)},d.prototype.remove=function(a){var b=this.__components,c=e.indexOf(b,a);-1!==c&&b.splice(c,1)}},function(a,b,c){function d(){e.call(this)}var e=a("./scene_graph/components/component"),f=a("./scene_graph/component_managers/transform_manager"),g=a("vec3"),h=a("quat"),i=a("mat3"),j=a("mat4"),k=e.prototype;c.exports=d,e.extend(d,"Transform",f),d.prototype.construct=function(){return k.construct.call(this),this.position=g.create(),this.rotation=h.create(),this.scale=g.create(1,1,1),this.matrix=j.create(),this.matrixWorld=j.create(),this.modelView=j.create(),this.normalMatrix=i.create(),this},d.prototype.destruct=function(){return k.destruct.call(this),this.position=null,this.rotation=null,this.scale=null,this.matrix=null,this.matrixWorld=null,this.modelView=null,this.normalMatrix=null,this},d.prototype.init=function(){return k.init.call(this),this},d.prototype.awake=function(){return k.awake.call(this),this},d.prototype.update=function(){var a=this.matrix,b=this.sceneObject,c=b&&b.parent,d=c&&c.getComponent("Transform");return k.update.call(this),j.compose(a,this.position,this.scale,this.rotation),d?j.mul(this.matrixWorld,d.matrixWorld,a):j.copy(this.matrixWorld,a),this},d.prototype.toJSON=function(a){return a=k.toJSON.call(this,a),a.position=g.copy(a.position||[],this.position),a.rotation=h.copy(a.rotation||[],this.rotation),a.scale=g.copy(a.scale||[],this.scale),a},d.prototype.fromJSON=function(a){return k.fromJSON.call(this,a),g.copy(this.position,a.position),h.copy(this.rotation,a.rotation),g.copy(this.scale,a.scale),this}},function(a,b,c){function d(){e.call(this)}var e=a("./scene_graph/component_managers/component_manager");c.exports=d,e.extend(d,"TransformManager",-9999),d.prototype.sort=function(a,b){return a.sceneObject.depth-b.sceneObject.depth}},function(a,b,c){var d=a("mathf"),e=a("vec4"),f=c.exports;f.create=e.create,f.copy=e.copy,f.clone=e.clone,f.set=e.set,f.lengthSqValues=e.lengthSqValues,f.lengthValues=e.lengthValues,f.invLengthValues=e.invLengthValues,f.dot=e.dot,f.lengthSq=e.lengthSq,f.length=e.length,f.invLength=e.invLength,f.setLength=e.setLength,f.normalize=e.normalize,f.lerp=e.lerp,f.min=e.min,f.max=e.max,f.clamp=e.clamp,f.equal=e.equal,f.notEqual=e.notEqual,f.str=function(a){return"Quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},f.mul=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},f.div=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=-c[0],i=-c[1],j=-c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},f.inverse=function(a,b){var c=f.dot(b,b);return c=0!==c?1/c:c,a[0]=b[0]*-c,a[1]=b[1]*-c,a[2]=b[2]*-c,a[3]=b[3]*c,a},f.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},f.calculateW=function(a,b){var c=b[0],e=b[1],f=b[2];return a[0]=c,a[1]=e,a[2]=f,a[3]=-d.sqrt(d.abs(1-c*c-e*e-f*f)),a},f.nlerp=function(a,b,c,d){return f.normalize(f.lerp(a,b,c,d))},f.slerp=function(a,b,c,e){var f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3],r=j*n+k*o+l*p+m*q;return 0>r&&(r*=-1,n*=-1,o*=-1,p*=-1,q*=-1),1-r>d.EPSILON?(f=d.acos(r),g=d.sin(f),g=0!==g?1/g:g,h=d.sin((1-e)*f)*g,i=d.sin(e*f)*g):(h=1-e,i=e),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},f.rotationX=function(a){var b=a[2],c=a[3];return d.atan2(2*a[0]*c+2*a[1]*b,1-2*(b*b+c*c))},f.rotationY=function(a){var b=2*(a[0]*a[2]+a[3]*a[1]);return d.asin(-1>b?-1:b>1?1:b)},f.rotationZ=function(a){var b=a[1],c=a[2];return d.atan2(2*a[0]*b+2*c*a[3],1-2*(b*b+c*c))},f.rotateX=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=b[3],i=.5*c,j=d.sin(i),k=d.cos(i);return a[0]=e*k+h*j,a[1]=f*k+g*j,a[2]=g*k-f*j,a[3]=h*k-e*j,a},f.rotateY=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=b[3],i=.5*c,j=d.sin(i),k=d.cos(i);return a[0]=e*k-g*j,a[1]=f*k+h*j,a[2]=g*k+e*j,a[3]=h*k-f*j,a},f.rotateZ=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=b[3],i=.5*c,j=d.sin(i),k=d.cos(i);return a[0]=e*k+f*j,a[1]=f*k-e*j,a[2]=g*k+h*j,a[3]=h*k-g*j,a},f.rotate=function(a,b,c,d,e){return void 0!==e&&f.rotateZ(a,b,e),void 0!==c&&f.rotateX(a,b,c),void 0!==d&&f.rotateY(a,b,d),a},f.lookRotation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=h*f-i*e,k=i*d-g*f,l=g*e-h*d,m=2*(1+g*d+h*e+i*f),n=m*m,o=0!==n?1/n:n;return a[0]=j*o,a[1]=k*o,a[2]=l*o,a[3]=.5*n,a},f.fromAxisAngle=function(a,b,c){var e=.5*c,f=d.sin(e);return a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f,a[3]=d.cos(e),a},f.fromMat=function(a,b,c,e,f,g,h,i,j,k){var l,m,n=b+g+k;return n>0?(l=.5/d.sqrt(n+1),a[3]=.25/l,a[0]=(j-h)*l,a[1]=(e-i)*l,a[2]=(f-c)*l):b>g&&b>k?(l=2*d.sqrt(1+b-g-k),m=1/l,a[3]=(j-h)*m,a[0]=.25*l,a[1]=(c+f)*m,a[2]=(e+i)*m):g>k?(l=2*d.sqrt(1+g-b-k),m=1/l,a[3]=(e-i)*m,a[0]=(c+f)*m,a[1]=.25*l,a[2]=(h+j)*m):(l=2*d.sqrt(1+k-b-g),m=1/l,a[3]=(f-c)*m,a[0]=(e+i)*m,a[1]=(h+j)*m,a[2]=.25*l),a},f.fromMat3=function(a,b){return f.fromMat(a,b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8])},f.fromMat4=function(a,b){return f.fromMat(a,b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10])}},function(a,b,c){var d=a("mathf"),e=c.exports;e.create=function(a,b,c,e){var f=new d.ArrayType(4);return f[0]=void 0!==a?a:0,f[1]=void 0!==b?b:0,f[2]=void 0!==c?c:0,f[3]=void 0!==e?e:1,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.clone=function(a){var b=new d.ArrayType(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.set=function(a,b,c,d,e){return a[0]=void 0!==b?b:0,a[1]=void 0!==c?c:0,a[2]=void 0!==d?d:0,a[3]=void 0!==e?e:0,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],b},e.sub=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.mul=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.div=function(a,b,c){var d=c[0],e=c[1],f=c[2],g=c[3];return a[0]=b[0]*(0!==d?1/d:d),a[1]=b[1]*(0!==e?1/e:e),a[2]=b[2]*(0!==f?1/f:f),a[3]=b[3]*(0!==g?1/g:g),a},e.sadd=function(a,b,c){return a[0]=b[0]+c,a[1]=b[1]+c,a[2]=b[2]+c,a[3]=b[3]+c,b},e.ssub=function(a,b,c){return a[0]=b[0]-c,a[1]=b[1]-c,a[2]=b[2]-c,a[3]=b[3]-c,a},e.smul=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.sdiv=function(a,b,c){return c=0!==c?1/c:c,a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.lengthSqValues=function(a,b,c,d){return a*a+b*b+c*c+d*d},e.lengthValues=function(a,b,c,f){var g=e.lengthSqValues(a,b,c,f);return 0!==g?d.sqrt(g):g},e.invLengthValues=function(a,b,c,f){var g=e.lengthSqValues(a,b,c,f);return 0!==g?1/d.sqrt(g):g},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lengthSq=function(a){return e.dot(a,a)},e.length=function(a){var b=e.lengthSq(a);return 0!==b?d.sqrt(b):b},e.invLength=function(a){var b=e.lengthSq(a);return 0!==b?1/d.sqrt(b):b},e.setLength=function(a,b,c){var d=b[0],f=b[1],g=b[2],h=b[3],i=c*e.invLengthValues(d,f,g,h);return a[0]=d*i,a[1]=f*i,a[2]=g*i,a[3]=h*i,a},e.normalize=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],h=e.invLengthValues(c,d,f,g);return a[0]=c*h,a[1]=d*h,a[2]=f*h,a[3]=g*h,a},e.inverse=function(a,b){return a[0]=-1*b[0],a[1]=-1*b[1],a[2]=-1*b[2],a[3]=-1*b[3],a},e.lerp=function(a,b,c,e){var f=d.lerp;return a[0]=f(b[0],c[0],e),a[1]=f(b[1],c[1],e),a[2]=f(b[2],c[2],e),a[3]=f(b[3],c[3],e),a},e.min=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d>h?h:d,a[1]=e>i?i:e,a[2]=f>j?j:f,a[3]=g>k?k:g,a},e.max=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=h>d?h:d,a[1]=i>e?i:e,a[2]=j>f?j:f,a[3]=k>g?k:g,a},e.clamp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=c[0],j=c[1],k=c[2],l=c[3],m=d[0],n=d[1],o=d[2],p=d[3];return a[0]=i>e?i:e>m?m:e,a[1]=j>f?j:f>n?n:f,a[2]=k>g?k:g>o?o:g,a[3]=l>h?l:h>p?p:h,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=d*c[0]+e*c[4]+f*c[8]+g*c[12],a[1]=d*c[1]+e*c[5]+f*c[9]+g*c[13],a[2]=d*c[2]+e*c[6]+f*c[10]+g*c[14],a[3]=d*c[3]+e*c[7]+f*c[11]+g*c[15],a},e.transformProjection=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d*c[3]+e*c[7]+f*c[11]+g*c[15];return h=0!==h?1/h:h,a[0]=(d*c[0]+e*c[4]+f*c[8]+g*c[12])*h,a[1]=(d*c[1]+e*c[5]+f*c[9]+g*c[13])*h,a[2]=(d*c[2]+e*c[6]+f*c[10]+g*c[14])*h,a[3]=(d*c[3]+e*c[7]+f*c[11]+g*c[15])*h,a},e.positionFromMat4=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a[3]=b[15],a},e.scaleFromMat4=function(a,b){return a[0]=e.lengthValues(b[0],b[4],b[8],b[12]),a[1]=e.lengthValues(b[1],b[5],b[9],b[13]),a[2]=e.lengthValues(b[2],b[6],b[10],b[14]),a[3]=e.lengthValues(b[3],b[7],b[11],b[15]),a},e.equal=function(a,b){return!(a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3])},e.notEqual=function(a,b){return a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3]},e.str=function(a){return"Vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}},function(a,b,c){var d=a("mathf"),e=c.exports;e.create=function(a,b,c,e,f,g,h,i,j){var k=new d.ArrayType(9);return k[0]=void 0!==a?a:1,k[1]=void 0!==e?e:0,k[2]=void 0!==h?h:0,k[3]=void 0!==b?b:0,k[4]=void 0!==f?f:1,k[5]=void 0!==i?i:0,k[6]=void 0!==c?c:0,k[7]=void 0!==g?g:0,k[8]=void 0!==j?j:1,k},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.clone=function(a){var b=new d.ArrayType(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.set=function(a,b,c,d,e,f,g,h,i,j){return a[0]=void 0!==b?b:1,a[1]=void 0!==e?e:0,a[2]=void 0!==h?h:0,a[3]=void 0!==c?c:0,a[4]=void 0!==f?f:1,a[5]=void 0!==i?i:0,a[6]=void 0!==d?d:0,a[7]=void 0!==g?g:0,a[8]=void 0!==j?j:1,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.zero=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a[8]=0,a},e.mul=function(a,b,c){var d=b[0],e=b[3],f=b[6],g=b[1],h=b[4],i=b[7],j=b[2],k=b[5],l=b[8],m=c[0],n=c[3],o=c[6],p=c[1],q=c[4],r=c[7],s=c[2],t=c[5],u=c[8];return a[0]=d*m+g*n+j*o,a[3]=e*m+h*n+k*o,a[6]=f*m+i*n+l*o,a[1]=d*p+g*q+j*r,a[4]=e*p+h*q+k*r,a[7]=f*p+i*q+l*r,a[2]=d*s+g*t+j*u,a[5]=e*s+h*t+k*u,a[8]=f*s+i*t+l*u,a},e.smul=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a},e.sdiv=function(a,b,c){return c=0!==c?1/c:c,a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*f*j-b*g*i-c*e*j+c*g*h+d*e*i-d*f*h},e.inverseMat=function(a,b,c,d,f,g,h,i,j,k){var l=g*k-h*j,m=d*j-c*k,n=c*h-d*g,o=b*l+f*m+i*n;return 0===o?e.identity(a):(o=1/o,a[0]=l*o,a[1]=(h*i-f*k)*o,a[2]=(f*j-g*i)*o,a[3]=m*o,a[4]=(b*k-d*i)*o,a[5]=(c*i-b*j)*o,a[6]=n*o,a[7]=(d*f-b*h)*o,a[8]=(b*g-c*f)*o,a)},e.inverse=function(a,b){return e.inverseMat(a,b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8])},e.inverseMat4=function(a,b){return e.inverseMat(a,b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10])},e.transpose=function(a,b){var c,d,e;return a===b?(c=b[1],d=b[2],e=b[5],a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e):(a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8]),a},e.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]*=d,a[3]*=e,a[6]*=f,a[1]*=d,a[4]*=e,a[7]*=f,a[2]*=d,a[5]*=e,a[8]*=f,a},e.makeScale=function(a,b){return e.set(a,b[0],0,0,0,b[1],0,0,0,b[2])},e.makeRotationX=function(a,b){var c=d.cos(b),f=d.sin(b);return e.set(a,1,0,0,0,c,-f,0,f,c)},e.makeRotationY=function(a,b){var c=d.cos(b),f=d.sin(b);return e.set(a,c,0,f,0,1,0,-f,0,c)},e.makeRotationZ=function(a,b){var c=d.cos(b),f=d.sin(b);return e.set(a,c,-f,0,f,c,0,0,0,1)},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,n=d*i,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-(m+o),a[1]=k+r,a[2]=l-q,a[3]=k-r,a[4]=1-(j+o),a[5]=n+p,a[6]=l+q,a[7]=n-p,a[8]=1-(j+m),a},e.equal=function(a,b){return!(a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3]||a[4]!==b[4]||a[5]!==b[5]||a[6]!==b[6]||a[7]!==b[7]||a[8]!==b[8])},e.notEqual=function(a,b){return a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3]||a[4]!==b[4]||a[5]!==b[5]||a[6]!==b[6]||a[7]!==b[7]||a[8]!==b[8]},e.str=function(a){return"Mat3["+a[0]+", "+a[3]+", "+a[6]+"]\n     ["+a[1]+", "+a[4]+", "+a[7]+"]\n     ["+a[2]+", "+a[5]+", "+a[8]+"]"}},function(a,b,c){var d=a("mathf"),e=a("vec3"),f=c.exports;f.create=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=new d.ArrayType(16);return r[0]=void 0!==a?a:1,r[4]=void 0!==b?b:0,r[8]=void 0!==c?c:0,r[12]=void 0!==e?e:0,r[1]=void 0!==f?f:0,r[5]=void 0!==g?g:1,r[9]=void 0!==h?h:0,r[13]=void 0!==i?i:0,r[2]=void 0!==j?j:0,r[6]=void 0!==k?k:0,r[10]=void 0!==l?l:1,r[14]=void 0!==m?m:0,r[3]=void 0!==n?n:0,r[7]=void 0!==o?o:0,r[11]=void 0!==p?p:0,r[15]=void 0!==q?q:1,r},f.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},f.clone=function(a){var b=new d.ArrayType(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},f.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a[0]=void 0!==b?b:1,a[4]=void 0!==c?c:0,a[8]=void 0!==d?d:0,a[12]=void 0!==e?e:0,a[1]=void 0!==f?f:0,a[5]=void 0!==g?g:1,a[9]=void 0!==h?h:0,a[13]=void 0!==i?i:0,a[2]=void 0!==j?j:0,a[6]=void 0!==k?k:0,a[10]=void 0!==l?l:1,a[14]=void 0!==m?m:0,a[3]=void 0!==n?n:0,a[7]=void 0!==o?o:0,a[11]=void 0!==p?p:0,a[15]=void 0!==q?q:1,a},f.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},f.zero=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=0,a},f.mul=function(a,b,c){var d=b[0],e=b[4],f=b[8],g=b[12],h=b[1],i=b[5],j=b[9],k=b[13],l=b[2],m=b[6],n=b[10],o=b[14],p=b[3],q=b[7],r=b[11],s=b[15],t=c[0],u=c[4],v=c[8],w=c[12],x=c[1],y=c[5],z=c[9],A=c[13],B=c[2],C=c[6],D=c[10],E=c[14],F=c[3],G=c[7],H=c[11],I=c[15];return a[0]=d*t+e*x+f*B+g*F,a[4]=d*u+e*y+f*C+g*G,a[8]=d*v+e*z+f*D+g*H,a[12]=d*w+e*A+f*E+g*I,a[1]=h*t+i*x+j*B+k*F,a[5]=h*u+i*y+j*C+k*G,a[9]=h*v+i*z+j*D+k*H,a[13]=h*w+i*A+j*E+k*I,a[2]=l*t+m*x+n*B+o*F,a[6]=l*u+m*y+n*C+o*G,a[10]=l*v+m*z+n*D+o*H,a[14]=l*w+m*A+n*E+o*I,a[3]=p*t+q*x+r*B+s*F,a[7]=p*u+q*y+r*C+s*G,a[11]=p*v+q*z+r*D+s*H,a[15]=p*w+q*A+r*E+s*I,a},f.smul=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12]*c,a[13]=b[13]*c,a[14]=b[14]*c,a[15]=b[15]*c,a},f.sdiv=function(a,b,c){return c=0!==c?1/c:c,a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12]*c,a[13]=b[13]*c,a[14]=b[14]*c,a[15]=b[15]*c,a},f.determinant=function(a){var b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15];return n*(e*h*k-d*i*k-e*g*l+c*i*l+d*g*m-c*h*m)+o*(b*h*m-b*i*l+e*f*l-d*f*m+d*i*j-e*h*j)+p*(b*i*k-b*g*m-e*f*k+c*f*m+e*g*j-c*i*j)+q*(-d*g*j-b*h*k+b*g*l+d*f*k-c*f*l+c*h*j)},f.inverse=function(a,b){var c=b[0],d=b[4],e=b[8],g=b[12],h=b[1],i=b[5],j=b[9],k=b[13],l=b[2],m=b[6],n=b[10],o=b[14],p=b[3],q=b[7],r=b[11],s=b[15],t=j*o*q-k*n*q+k*m*r-i*o*r-j*m*s+i*n*s,u=g*n*q-e*o*q-g*m*r+d*o*r+e*m*s-d*n*s,v=e*k*q-g*j*q+g*i*r-d*k*r-e*i*s+d*j*s,w=g*j*m-e*k*m-g*i*n+d*k*n+e*i*o-d*j*o,x=c*t+h*u+l*v+p*w;return 1===x?f.identity(a):(x=1/x,a[0]=t*x,a[4]=u*x,a[8]=v*x,a[12]=w*x,a[1]=(k*n*p-j*o*p-k*l*r+h*o*r+j*l*s-h*n*s)*x,a[5]=(e*o*p-g*n*p+g*l*r-c*o*r-e*l*s+c*n*s)*x,a[9]=(g*j*p-e*k*p-g*h*r+c*k*r+e*h*s-c*j*s)*x,a[13]=(e*k*l-g*j*l+g*h*n-c*k*n-e*h*o+c*j*o)*x,a[2]=(i*o*p-k*m*p+k*l*q-h*o*q-i*l*s+h*m*s)*x,a[6]=(g*m*p-d*o*p-g*l*q+c*o*q+d*l*s-c*m*s)*x,a[10]=(d*k*p-g*i*p+g*h*q-c*k*q-d*h*s+c*i*s)*x,a[14]=(g*i*l-d*k*l-g*h*m+c*k*m+d*h*o-c*i*o)*x,a[3]=(j*m*p-i*n*p-j*l*q+h*n*q+i*l*r-h*m*r)*x,a[7]=(d*n*p-e*m*p+e*l*q-c*n*q-d*l*r+c*m*r)*x,a[11]=(e*i*p-d*j*p-e*h*q+c*j*q+d*h*r-c*i*r)*x,a[15]=(d*j*l-e*i*l+e*h*m-c*j*m-d*h*n+c*i*n)*x,a)},f.transpose=function(a,b){var c,d,e,f,g,h;return a===b?(c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h):(a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15]),a},f.lookAt=function(a,b,c,e){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=e[0],u=e[1],v=e[2],w=center[0],x=center[1],y=center[2];return m=q-w,n=r-x,o=s-y,d.abs(m)<d.EPSILON&&d.abs(n)<d.EPSILON&&d.abs(o)<d.EPSILON?f.identity(a):(p=1/d.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=d.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=d.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},f.compose=function(a,b,c,d){var e=d[0],f=d[1],g=d[2],h=d[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=c[0],v=c[1],w=c[2];return a[0]=(1-(o+q))*u,a[4]=(m-t)*v,a[8]=(n+s)*w,a[1]=(m+t)*u,a[5]=(1-(l+q))*v,a[9]=(p-r)*w,a[2]=(n-s)*u,a[6]=(p+r)*v,a[10]=(1-(l+o))*w,a[3]=0,a[7]=0,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},f.decompose=function(a,b,c,f){var g,h,i=a[0],j=a[4],k=a[8],l=a[1],m=a[5],n=a[9],o=a[2],p=a[6],q=a[10],r=0,s=0,t=0,u=1,v=e.lengthValues(i,l,o),w=e.lengthValues(j,m,p),x=e.lengthValues(k,n,q),y=1/v,z=1/w,A=1/x;return c[0]=v,c[1]=w,c[2]=x,b[0]=a[12],b[1]=a[13],b[2]=a[14],i*=y,j*=z,k*=A,l*=y,m*=z,n*=A,o*=y,p*=z,q*=A,h=i+m+q,h>0?(g=.5/d.sqrt(h+1),u=.25/g,r=(p-n)*g,s=(k-o)*g,t=(l-j)*g):i>m&&i>q?(g=2*d.sqrt(1+i-m-q),u=(p-n)/g,r=.25*g,s=(j+l)/g,t=(k+o)/g):m>q?(g=2*d.sqrt(1+m-i-q),u=(k-o)/g,r=(j+l)/g,s=.25*g,t=(n+p)/g):(g=2*d.sqrt(1+q-i-m),u=(l-j)/g,r=(k+o)/g,s=(n+p)/g,t=.25*g),f[0]=r,f[1]=s,f[2]=u,f[3]=t,a},f.setPosition=function(a,b){var c=b[2];return a[12]=b[0],a[13]=b[1],a[14]=void 0!==c?c:0,a},f.extractPosition=function(a,b){return a[12]=b[12],a[13]=b[13],a[14]=b[14],a},f.extractRotation=function(a,b){var c=e.lengthSqValues(b[0],b[1],b[2]),f=e.lengthSqValues(b[4],b[5],b[6]),g=e.lengthSqValues(b[8],b[9],b[10]),h=0!==c?1/d.sqrt(c):c,i=0!==f?1/d.sqrt(f):f,j=0!==g?1/d.sqrt(g):g;return a[0]=me[0]*h,a[1]=me[1]*h,a[2]=me[2]*h,a[4]=me[4]*i,a[5]=me[5]*i,a[6]=me[6]*i,a[8]=me[8]*j,a[9]=me[9]*j,a[10]=me[10]*j,a},f.extractRotationScale=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[8]=b[8],a[9]=b[9],a[10]=b[10],a},f.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},f.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},f.rotateX=function(a,b,c){var e=b[4],f=b[5],g=b[6],h=b[7],i=b[8],j=b[9],k=b[10],l=b[11],m=d.cos(c),n=d.sin(c);return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=m*e+n*i,a[5]=m*f+n*j,a[6]=m*g+n*k,a[7]=m*h+n*l,a[8]=m*i-n*e,a[9]=m*j-n*f,a[10]=m*k-n*g,a[11]=m*l-n*h,this},f.rotateY=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=b[3],i=b[8],j=b[9],k=b[10],l=b[11],m=d.cos(c),n=d.sin(c);return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=m*e-n*i,a[1]=m*f-n*j,a[2]=m*g-n*k,a[3]=m*h-n*l,a[8]=m*i+n*e,a[9]=m*j+n*f,a[10]=m*k+n*g,a[11]=m*l+n*h,this},f.rotateZ=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=b[3],i=b[4],j=b[5],k=b[6],l=b[7],m=d.cos(c),n=d.sin(c);return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=m*e+n*i,a[1]=m*f+n*j,a[2]=m*g+n*k,a[3]=m*h+n*l,a[4]=m*i-n*e,a[5]=m*j-n*f,a[6]=m*k-n*g,a[7]=m*l-n*h,a},f.makeTranslation=function(a,b){return f.set(a,1,0,0,b[0],0,1,0,b[1],0,0,1,b[2],0,0,0,1)},f.makeScale=function(a,b){return f.set(a,b[0],0,0,0,0,b[1],0,0,0,0,b[2],0,0,0,0,1)},f.makeRotationX=function(a,b){var c=d.cos(b),e=d.sin(b);return f.set(a,1,0,0,0,0,c,-e,0,0,e,c,0,0,0,0,1)},f.makeRotationY=function(a,b){var c=d.cos(b),e=d.sin(b);return f.set(a,c,0,e,0,0,1,0,0,-e,0,c,0,0,0,0,1)},f.makeRotationZ=function(a,b){var c=d.cos(b),e=d.sin(b);return f.set(a,c,-e,0,0,e,c,0,0,0,0,1,0,0,0,0,1)},f.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,n=d*i,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-(m+o),a[4]=k-r,a[8]=l+q,a[1]=k+r,a[5]=1-(j+o),a[9]=n-p,a[2]=l-q,a[6]=n+p,a[10]=1-(j+m),a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a
},f.frustum=function(a,b,c,d,e,f,g){var h=2*f/(c-b),i=2*f/(d-e),j=(c+b)/(c-b),k=(d+e)/(d-e),l=-(g+f)/(g-f),m=-2*g*f/(g-f);return a[0]=h,a[4]=0,a[8]=j,a[12]=0,a[1]=0,a[5]=i,a[9]=k,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,a},f.perspective=function(a,b,c,e,g){var h=e*d.tan(.5*b),i=-h,j=i*c,k=h*c;return f.frustum(a,j,k,h,i,e,g)},f.orthographic=function(a,b,c,d,e,f,g){var h=c-b,i=d-e,j=g-f,k=(c+b)/h,l=(d+e)/i,m=(g+f)/j;return a[0]=2/h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-2/j,a[11]=0,a[12]=-k,a[13]=-l,a[14]=-m,a[15]=1,a},f.equal=function(a,b){return!(a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3]||a[4]!==b[4]||a[5]!==b[5]||a[6]!==b[6]||a[7]!==b[7]||a[8]!==b[8]||a[9]!==b[9]||a[10]!==b[10]||a[11]!==b[11]||a[12]!==b[12]||a[13]!==b[13]||a[14]!==b[14]||a[15]!==b[15])},f.notEqual=function(a,b){return a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3]||a[4]!==b[4]||a[5]!==b[5]||a[6]!==b[6]||a[7]!==b[7]||a[8]!==b[8]||a[9]!==b[9]||a[10]!==b[10]||a[11]!==b[11]||a[12]!==b[12]||a[13]!==b[13]||a[14]!==b[14]||a[15]!==b[15]},f.str=function(a){return"Mat4["+a[0]+", "+a[4]+", "+a[8]+", "+a[12]+"]\n     ["+a[1]+", "+a[5]+", "+a[9]+", "+a[13]+"]\n     ["+a[2]+", "+a[6]+", "+a[10]+", "+a[14]+"]\n     ["+a[3]+", "+a[7]+", "+a[11]+", "+a[15]+"]"}},function(a,b,c){function d(){e.call(this)}var e=a("./scene_graph/components/component"),f=a("./scene_graph/component_managers/camera_manager"),g=a("mathf"),h=a("vec2"),i=a("vec3"),j=a("mat4"),k=a("color"),l=e.prototype;c.exports=d,e.extend(d,"Camera",f),d.prototype.construct=function(a){return l.construct.call(this),a=a||{},this.width=960,this.height=640,this.invWidth=1/this.width,this.invHeight=1/this.height,this.autoResize=null!=a.autoResize?!!a.autoResize:!0,this.background=null!=a.background?a.background:k.create(.5,.5,.5),this.aspect=this.width/this.height,this.fov=null!=a.fov?a.fov:35,this.near=null!=a.near?a.near:.0625,this.far=null!=a.far?a.far:16384,this.orthographic=null!=a.orthographic?!!a.orthographic:!1,this.orthographicSize=null!=a.orthographicSize?a.orthographicSize:2,this.minOrthographicSize=null!=a.minOrthographicSize?a.minOrthographicSize:g.EPSILON,this.maxOrthographicSize=null!=a.maxOrthographicSize?a.maxOrthographicSize:1024,this.projection=j.create(),this.view=j.create(),this.needsUpdate=!0,this.__active=!1,this},d.prototype.destruct=function(){return l.destruct.call(this),this.width=null,this.height=null,this.invWidth=null,this.invHeight=null,this.autoResize=null,this.background=null,this.aspect=null,this.fov=null,this.near=null,this.far=null,this.orthographic=null,this.orthographicSize=null,this.minOrthographicSize=null,this.maxOrthographicSize=null,this.projection=null,this.view=null,this.needsUpdate=null,this.__active=null,this},d.prototype.set=function(a,b){return this.width=a,this.height=b,this.invWidth=1/this.width,this.invHeight=1/this.height,this.aspect=a/b,this.needsUpdate=!0,this},d.prototype.setWidth=function(a){return this.width=a,this.aspect=a/this.height,this.invWidth=1/this.width,this.needsUpdate=!0,this},d.prototype.setHeight=function(a){return this.height=a,this.aspect=this.width/a,this.invHeight=1/this.height,this.needsUpdate=!0,this},d.prototype.setFov=function(a){return this.fov=a,this.needsUpdate=!0,this},d.prototype.setNear=function(a){return this.near=a,this.needsUpdate=!0,this},d.prototype.setFar=function(a){return this.far=a,this.needsUpdate=!0,this},d.prototype.setOrthographic=function(a){return this.orthographic=!!a,this.needsUpdate=!0,this},d.prototype.toggleOrthographic=function(){return this.orthographic=!this.orthographic,this.needsUpdate=!0,this},d.prototype.setOrthographicSize=function(a){return this.orthographicSize=clamp(a,this.minOrthographicSize,this.maxOrthographicSize),this.needsUpdate=!0,this};var m=j.create(),n=i.create();d.prototype.toWorld=function(a,b){return b=b||i.create(),b[0]=2*a[0]*this.invWidth-1,b[1]=-2*a[1]*this.invHeight+1,j.mul(m,this.projection,this.view),i.transformMat4(b,b,j.inverse(m,m)),b[2]=this.near,b},d.prototype.toScreen=function(a,b){return b=b||h.create(),i.copy(n,a),j.mul(m,this.projection,this.view),i.transformMat4(b,n,m),b[0]=.5*(n[0]+1)*this.width,b[1]=.5*(1-n[1])*this.height,b},d.prototype.update=function(a){var b,c,d,e,f,h=this.sceneObject,i=h&&(h.getComponent("transform")||h.getComponent("transform2d"));return l.update.call(this),a||this.__active?(this.needsUpdate&&(this.orthographic?(this.orthographicSize=g.clamp(this.orthographicSize,this.minOrthographicSize,this.maxOrthographicSize),b=this.orthographicSize,c=b*this.aspect,d=-c,e=b,f=-e,j.orthographic(this.projection,d,c,e,f,this.near,this.far)):j.perspective(this.projection,g.degsToRads(this.fov),this.aspect,this.near,this.far),this.needsUpdate=!1),i&&j.inverse(this.view,i.matrixWorld),this):this},d.prototype.toJSON=function(a){return a=l.toJSON.call(this,a),a.width=this.width,a.height=this.height,a.aspect=this.aspect,a.autoResize=this.autoResize,a.background=k.copy(a.background||[],this.background),a.far=this.far,a.near=this.near,a.fov=this.fov,a.orthographic=this.orthographic,a.orthographicSize=this.orthographicSize,a.minOrthographicSize=this.minOrthographicSize,a.maxOrthographicSize=this.maxOrthographicSize,a},d.prototype.fromJSON=function(a){return l.fromJSON.call(this,a),this.width=a.width,this.height=a.height,this.aspect=a.aspect,this.autoResize=a.autoResize,k.copy(this.background,a.background),this.far=a.far,this.near=a.near,this.fov=a.fov,this.orthographic=a.orthographic,this.orthographicSize=a.orthographicSize,this.minOrthographicSize=a.minOrthographicSize,this.maxOrthographicSize=a.maxOrthographicSize,this.needsUpdate=!0,this}},function(a,b,c){function d(){e.call(this)}var e=a("./scene_graph/component_managers/component_manager");c.exports=d,e.extend(d,"CameraManager"),d.prototype.sort=function(a,b){return a.__active?1:b.__active?-1:0}},function(a,b,c){var d=a("vec3"),e=c.exports;e.create=d.create,e.copy=d.copy,e.clone=d.clone,e.setRGB=d.set,e.add=d.add,e.sub=d.sub,e.mul=d.mul,e.div=d.div,e.sadd=d.sadd,e.ssub=d.ssub,e.smul=d.smul,e.sdiv=d.sdiv,e.lengthSqValues=d.lengthSqValues,e.lengthValues=d.lengthValues,e.invLengthValues=d.invLengthValues,e.dot=d.dot,e.lengthSq=d.lengthSq,e.length=d.length,e.invLength=d.invLength,e.setLength=d.setLength,e.normalize=d.normalize,e.lerp=d.lerp,e.min=d.min,e.max=d.max,e.clamp=d.clamp,e.equal=d.equal,e.notEqual=d.notEqual;var f=e.create(0,0,0),g=e.create(1,1,1);e.cnormalize=function(a){return e.clamp(a,a,f,g)},e.str=function(a){return"Color("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.set=function(a,b,c,d){var f=typeof b;return"number"===f?(a[0]=void 0!==b?b:0,a[1]=void 0!==c?c:0,a[2]=void 0!==d?d:0):"string"===f?e.setStyle(a,b):b.length===+b.length&&(a[0]=b[0]||0,a[1]=b[1]||0,a[2]=b[2]||0),a};var h=/^rgb\((\d+),(\d+),(\d+)\)$/i,i=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i,j=/^\#([0.0-9a-f]{6})$/i,k=/^\#([0.0-9a-f])([0.0-9a-f])([0.0-9a-f])$/i,l=/#(.)(.)(.)/,m="#$1$1$2$2$3$3",n=/^(\w+)$/i,o=1/255,p=.01;e.setStyle=function(a,b){var c;return h.test(b)?(c=h.exec(b),a[0]=min(255,Number(c[1]))*o,a[1]=min(255,Number(c[2]))*o,a[2]=min(255,Number(c[3]))*o):i.test(b)?(c=i.exec(b),a[0]=min(100,Number(c[1]))*p,a[1]=min(100,Number(c[2]))*p,a[2]=min(100,Number(c[3]))*p):j.test(b)?(a[0]=parseInt(b.substr(1,2),16)*o,a[1]=parseInt(b.substr(3,2),16)*o,a[2]=parseInt(b.substr(5,2),16)*o):k.test(b)?(b=b.replace(l,m),a[0]=parseInt(b.substr(1,2),16)*o,a[1]=parseInt(b.substr(3,2),16)*o,a[2]=parseInt(b.substr(5,2),16)*o):n.test(b)&&(b=q[b.toLowerCase()],a[0]=parseInt(b.substr(1,2),16)*o,a[1]=parseInt(b.substr(3,2),16)*o,a[2]=parseInt(b.substr(5,2),16)*o),a};var q=e.colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}],{"./index":0,"./base/class":1,type:2,utils:3,event_emitter:4,"./base/helpers":5,time:6,process:7,environment:8,"./application/base_application":9,"./scene_graph/scene":10,input:11,vec3:12,mathf:13,"input/handler":14,delegator:15,weak_map:16,create_weak_map:17,event_listener:18,"delegator/utils/event_class_map":19,"events/synthetic_clipboard_event":20,"delegator/synthetic_event":21,"utils/create_pool":22,"utils/get_event_target":23,"events/synthetic_drag_event":24,"delegator/synthetic_mouse_event":25,"delegator/synthetic_ui_event":26,"utils/viewport":27,"delegator/get_event_modifier_state":28,"events/synthetic_focus_event":29,"events/synthetic_input_event":30,"events/synthetic_keyboard_event":31,"utils/get_event_key":32,"delegator/get_event_char_code":33,"events/synthetic_touch_event":34,"delegator/synthetic_touch":35,"events/synthetic_wheel_event":36,"delegator/utils/get_path":37,"input/mouse":38,vec2:39,"input/buttons":40,"input/button":41,"input/axes":42,"input/axis":43,"input/event_handlers":44,"input/key_codes":45,"./base/time":46,"./application/create_loop":47,request_animation_frame:48,"./application/application":49,"./application/canvas":50,"./scene_graph/scene_object":51,"./scene_graph/components/component":52,"./scene_graph/component_managers/component_manager":53,"./scene_graph/components/transform":54,"./scene_graph/component_managers/transform_manager":55,quat:56,vec4:57,mat3:58,mat4:59,"./scene_graph/components/camera":60,"./scene_graph/component_managers/camera_manager":61,color:62},new Function("return this;")());